"use strict";const ae=require("electron"),Q=require("path"),mt=require("fs"),gf=require("constants"),Un=require("stream"),so=require("util"),tl=require("assert"),Ur=require("child_process"),nl=require("events"),kn=require("crypto"),rl=require("tty"),kr=require("os"),en=require("url"),Ef=require("string_decoder"),il=require("zlib"),yf=require("http");var Se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ol={},Pt={},$e={};$e.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,r)=>{t.push((i,o)=>i!=null?r(i):n(o)),e.apply(this,t)})},"name",{value:e.name})};$e.fromPromise=function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>n(null,r),n)},"name",{value:e.name})};var it=gf,vf=process.cwd,_r=null,wf=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return _r||(_r=vf.call(process)),_r};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var ia=process.chdir;process.chdir=function(e){_r=null,ia.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ia)}var _f=Af;function Af(e){it.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,h){h&&process.nextTick(h)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,h,g){g&&process.nextTick(g)},e.lchownSync=function(){}),wf==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(h,g,_){var y=Date.now(),A=0;c(h,g,function T(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-y<6e4){setTimeout(function(){e.stat(g,function(D,x){D&&D.code==="ENOENT"?c(h,g,T):_(S)})},A),A<100&&(A+=10);return}_&&_(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(h,g,_,y,A,T){var S;if(T&&typeof T=="function"){var D=0;S=function(x,Z,oe){if(x&&x.code==="EAGAIN"&&D<10)return D++,c.call(e,h,g,_,y,A,S);T.apply(this,arguments)}}return c.call(e,h,g,_,y,A,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,h,g,_,y){for(var A=0;;)try{return c.call(e,f,h,g,_,y)}catch(T){if(T.code==="EAGAIN"&&A<10){A++;continue}throw T}}}(e.readSync);function t(c){c.lchmod=function(f,h,g){c.open(f,it.O_WRONLY|it.O_SYMLINK,h,function(_,y){if(_){g&&g(_);return}c.fchmod(y,h,function(A){c.close(y,function(T){g&&g(A||T)})})})},c.lchmodSync=function(f,h){var g=c.openSync(f,it.O_WRONLY|it.O_SYMLINK,h),_=!0,y;try{y=c.fchmodSync(g,h),_=!1}finally{if(_)try{c.closeSync(g)}catch{}else c.closeSync(g)}return y}}function n(c){it.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,h,g,_){c.open(f,it.O_SYMLINK,function(y,A){if(y){_&&_(y);return}c.futimes(A,h,g,function(T){c.close(A,function(S){_&&_(T||S)})})})},c.lutimesSync=function(f,h,g){var _=c.openSync(f,it.O_SYMLINK),y,A=!0;try{y=c.futimesSync(_,h,g),A=!1}finally{if(A)try{c.closeSync(_)}catch{}else c.closeSync(_)}return y}):c.futimes&&(c.lutimes=function(f,h,g,_){_&&process.nextTick(_)},c.lutimesSync=function(){})}function r(c){return c&&function(f,h,g){return c.call(e,f,h,function(_){m(_)&&(_=null),g&&g.apply(this,arguments)})}}function i(c){return c&&function(f,h){try{return c.call(e,f,h)}catch(g){if(!m(g))throw g}}}function o(c){return c&&function(f,h,g,_){return c.call(e,f,h,g,function(y){m(y)&&(y=null),_&&_.apply(this,arguments)})}}function a(c){return c&&function(f,h,g){try{return c.call(e,f,h,g)}catch(_){if(!m(_))throw _}}}function s(c){return c&&function(f,h,g){typeof h=="function"&&(g=h,h=null);function _(y,A){A&&(A.uid<0&&(A.uid+=4294967296),A.gid<0&&(A.gid+=4294967296)),g&&g.apply(this,arguments)}return h?c.call(e,f,h,_):c.call(e,f,_)}}function l(c){return c&&function(f,h){var g=h?c.call(e,f,h):c.call(e,f);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function m(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var oa=Un.Stream,Sf=Tf;function Tf(e){return{ReadStream:t,WriteStream:n};function t(r,i){if(!(this instanceof t))return new t(r,i);oa.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),s=0,l=a.length;s<l;s++){var m=a[s];this[m]=i[m]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){o.emit("error",c),o.readable=!1;return}o.fd=f,o.emit("open",f),o._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);oa.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),a=0,s=o.length;a<s;a++){var l=o[a];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Cf=bf,$f=Object.getPrototypeOf||function(e){return e.__proto__};function bf(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:$f(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var ne=mt,Of=_f,If=Sf,Rf=Cf,or=so,ge,Cr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ge=Symbol.for("graceful-fs.queue"),Cr=Symbol.for("graceful-fs.previous")):(ge="___graceful-fs.queue",Cr="___graceful-fs.previous");function Pf(){}function al(e,t){Object.defineProperty(e,ge,{get:function(){return t}})}var Ot=Pf;or.debuglog?Ot=or.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ot=function(){var e=or.format.apply(or,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!ne[ge]){var Nf=Se[ge]||[];al(ne,Nf),ne.close=function(e){function t(n,r){return e.call(ne,n,function(i){i||aa(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Cr,{value:e}),t}(ne.close),ne.closeSync=function(e){function t(n){e.apply(ne,arguments),aa()}return Object.defineProperty(t,Cr,{value:e}),t}(ne.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ot(ne[ge]),tl.equal(ne[ge].length,0)})}Se[ge]||al(Se,ne[ge]);var be=lo(Rf(ne));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ne.__patched&&(be=lo(ne),ne.__patched=!0);function lo(e){Of(e),e.gracefulify=lo,e.createReadStream=Z,e.createWriteStream=oe;var t=e.readFile;e.readFile=n;function n(E,q,B){return typeof q=="function"&&(B=q,q=null),M(E,q,B);function M(z,I,b,P){return t(z,I,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?xt([M,[z,I,b],$,P||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=i;function i(E,q,B,M){return typeof B=="function"&&(M=B,B=null),z(E,q,B,M);function z(I,b,P,$,N){return r(I,b,P,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?xt([z,[I,b,P,$],R,N||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=a);function a(E,q,B,M){return typeof B=="function"&&(M=B,B=null),z(E,q,B,M);function z(I,b,P,$,N){return o(I,b,P,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?xt([z,[I,b,P,$],R,N||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=l);function l(E,q,B,M){return typeof B=="function"&&(M=B,B=0),z(E,q,B,M);function z(I,b,P,$,N){return s(I,b,P,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?xt([z,[I,b,P,$],R,N||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var m=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(E,q,B){typeof q=="function"&&(B=q,q=null);var M=c.test(process.version)?function(b,P,$,N){return m(b,z(b,P,$,N))}:function(b,P,$,N){return m(b,P,z(b,P,$,N))};return M(E,q,B);function z(I,b,P,$){return function(N,R){N&&(N.code==="EMFILE"||N.code==="ENFILE")?xt([M,[I,b,P],N,$||Date.now(),Date.now()]):(R&&R.sort&&R.sort(),typeof P=="function"&&P.call(this,N,R))}}}if(process.version.substr(0,4)==="v0.8"){var h=If(e);T=h.ReadStream,D=h.WriteStream}var g=e.ReadStream;g&&(T.prototype=Object.create(g.prototype),T.prototype.open=S);var _=e.WriteStream;_&&(D.prototype=Object.create(_.prototype),D.prototype.open=x),Object.defineProperty(e,"ReadStream",{get:function(){return T},set:function(E){T=E},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return D},set:function(E){D=E},enumerable:!0,configurable:!0});var y=T;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(E){y=E},enumerable:!0,configurable:!0});var A=D;Object.defineProperty(e,"FileWriteStream",{get:function(){return A},set:function(E){A=E},enumerable:!0,configurable:!0});function T(E,q){return this instanceof T?(g.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function S(){var E=this;Ne(E.path,E.flags,E.mode,function(q,B){q?(E.autoClose&&E.destroy(),E.emit("error",q)):(E.fd=B,E.emit("open",B),E.read())})}function D(E,q){return this instanceof D?(_.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function x(){var E=this;Ne(E.path,E.flags,E.mode,function(q,B){q?(E.destroy(),E.emit("error",q)):(E.fd=B,E.emit("open",B))})}function Z(E,q){return new e.ReadStream(E,q)}function oe(E,q){return new e.WriteStream(E,q)}var V=e.open;e.open=Ne;function Ne(E,q,B,M){return typeof B=="function"&&(M=B,B=null),z(E,q,B,M);function z(I,b,P,$,N){return V(I,b,P,function(R,k){R&&(R.code==="EMFILE"||R.code==="ENFILE")?xt([z,[I,b,P,$],R,N||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return e}function xt(e){Ot("ENQUEUE",e[0].name,e[1]),ne[ge].push(e),co()}var ar;function aa(){for(var e=Date.now(),t=0;t<ne[ge].length;++t)ne[ge][t].length>2&&(ne[ge][t][3]=e,ne[ge][t][4]=e);co()}function co(){if(clearTimeout(ar),ar=void 0,ne[ge].length!==0){var e=ne[ge].shift(),t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];if(i===void 0)Ot("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-i>=6e4){Ot("TIMEOUT",t.name,n);var a=n.pop();typeof a=="function"&&a.call(null,r)}else{var s=Date.now()-o,l=Math.max(o-i,1),m=Math.min(l*1.2,100);s>=m?(Ot("RETRY",t.name,n),t.apply(null,n.concat([i]))):ne[ge].push(e)}ar===void 0&&(ar=setTimeout(co,0))}}(function(e){const t=$e.fromCallback,n=be,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof n[i]=="function");Object.assign(e,n),r.forEach(i=>{e[i]=t(n[i])}),e.exists=function(i,o){return typeof o=="function"?n.exists(i,o):new Promise(a=>n.exists(i,a))},e.read=function(i,o,a,s,l,m){return typeof m=="function"?n.read(i,o,a,s,l,m):new Promise((c,f)=>{n.read(i,o,a,s,l,(h,g,_)=>{if(h)return f(h);c({bytesRead:g,buffer:_})})})},e.write=function(i,o,...a){return typeof a[a.length-1]=="function"?n.write(i,o,...a):new Promise((s,l)=>{n.write(i,o,...a,(m,c,f)=>{if(m)return l(m);s({bytesWritten:c,buffer:f})})})},typeof n.writev=="function"&&(e.writev=function(i,o,...a){return typeof a[a.length-1]=="function"?n.writev(i,o,...a):new Promise((s,l)=>{n.writev(i,o,...a,(m,c,f)=>{if(m)return l(m);s({bytesWritten:c,buffers:f})})})}),typeof n.realpath.native=="function"?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Pt);var uo={},sl={};const Df=Q;sl.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Df.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const ll=Pt,{checkPath:cl}=sl,ul=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};uo.makeDir=async(e,t)=>(cl(e),ll.mkdir(e,{mode:ul(t),recursive:!0}));uo.makeDirSync=(e,t)=>(cl(e),ll.mkdirSync(e,{mode:ul(t),recursive:!0}));const Ff=$e.fromPromise,{makeDir:xf,makeDirSync:mi}=uo,gi=Ff(xf);var ze={mkdirs:gi,mkdirsSync:mi,mkdirp:gi,mkdirpSync:mi,ensureDir:gi,ensureDirSync:mi};const Lf=$e.fromPromise,fl=Pt;function Uf(e){return fl.access(e).then(()=>!0).catch(()=>!1)}var Nt={pathExists:Lf(Uf),pathExistsSync:fl.existsSync};const zt=be;function kf(e,t,n,r){zt.open(e,"r+",(i,o)=>{if(i)return r(i);zt.futimes(o,t,n,a=>{zt.close(o,s=>{r&&r(a||s)})})})}function Mf(e,t,n){const r=zt.openSync(e,"r+");return zt.futimesSync(r,t,n),zt.closeSync(r)}var dl={utimesMillis:kf,utimesMillisSync:Mf};const Kt=Pt,de=Q,Bf=so;function Hf(e,t,n){const r=n.dereference?i=>Kt.stat(i,{bigint:!0}):i=>Kt.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function jf(e,t,n){let r;const i=n.dereference?a=>Kt.statSync(a,{bigint:!0}):a=>Kt.lstatSync(a,{bigint:!0}),o=i(e);try{r=i(t)}catch(a){if(a.code==="ENOENT")return{srcStat:o,destStat:null};throw a}return{srcStat:o,destStat:r}}function qf(e,t,n,r,i){Bf.callbackify(Hf)(e,t,r,(o,a)=>{if(o)return i(o);const{srcStat:s,destStat:l}=a;if(l){if(Mn(s,l)){const m=de.basename(e),c=de.basename(t);return n==="move"&&m!==c&&m.toLowerCase()===c.toLowerCase()?i(null,{srcStat:s,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!s.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return s.isDirectory()&&fo(e,t)?i(new Error(Mr(e,t,n))):i(null,{srcStat:s,destStat:l})})}function Gf(e,t,n,r){const{srcStat:i,destStat:o}=jf(e,t,r);if(o){if(Mn(i,o)){const a=de.basename(e),s=de.basename(t);if(n==="move"&&a!==s&&a.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&fo(e,t))throw new Error(Mr(e,t,n));return{srcStat:i,destStat:o}}function hl(e,t,n,r,i){const o=de.resolve(de.dirname(e)),a=de.resolve(de.dirname(n));if(a===o||a===de.parse(a).root)return i();Kt.stat(a,{bigint:!0},(s,l)=>s?s.code==="ENOENT"?i():i(s):Mn(t,l)?i(new Error(Mr(e,n,r))):hl(e,t,a,r,i))}function pl(e,t,n,r){const i=de.resolve(de.dirname(e)),o=de.resolve(de.dirname(n));if(o===i||o===de.parse(o).root)return;let a;try{a=Kt.statSync(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(Mn(t,a))throw new Error(Mr(e,n,r));return pl(e,t,o,r)}function Mn(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function fo(e,t){const n=de.resolve(e).split(de.sep).filter(i=>i),r=de.resolve(t).split(de.sep).filter(i=>i);return n.reduce((i,o,a)=>i&&r[a]===o,!0)}function Mr(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var tn={checkPaths:qf,checkPathsSync:Gf,checkParentPaths:hl,checkParentPathsSync:pl,isSrcSubdir:fo,areIdentical:Mn};const Re=be,An=Q,Wf=ze.mkdirs,Vf=Nt.pathExists,Yf=dl.utimesMillis,Sn=tn;function zf(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Sn.checkPaths(e,t,"copy",n,(i,o)=>{if(i)return r(i);const{srcStat:a,destStat:s}=o;Sn.checkParentPaths(e,a,t,"copy",l=>l?r(l):n.filter?ml(sa,s,e,t,n,r):sa(s,e,t,n,r))})}function sa(e,t,n,r,i){const o=An.dirname(n);Vf(o,(a,s)=>{if(a)return i(a);if(s)return $r(e,t,n,r,i);Wf(o,l=>l?i(l):$r(e,t,n,r,i))})}function ml(e,t,n,r,i,o){Promise.resolve(i.filter(n,r)).then(a=>a?e(t,n,r,i,o):o(),a=>o(a))}function Xf(e,t,n,r,i){return r.filter?ml($r,e,t,n,r,i):$r(e,t,n,r,i)}function $r(e,t,n,r,i){(r.dereference?Re.stat:Re.lstat)(t,(a,s)=>a?i(a):s.isDirectory()?nd(s,e,t,n,r,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?Kf(s,e,t,n,r,i):s.isSymbolicLink()?od(e,t,n,r,i):s.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):s.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function Kf(e,t,n,r,i,o){return t?Jf(e,n,r,i,o):gl(e,n,r,i,o)}function Jf(e,t,n,r,i){if(r.overwrite)Re.unlink(n,o=>o?i(o):gl(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function gl(e,t,n,r,i){Re.copyFile(t,n,o=>o?i(o):r.preserveTimestamps?Qf(e.mode,t,n,i):Br(n,e.mode,i))}function Qf(e,t,n,r){return Zf(e)?ed(n,e,i=>i?r(i):la(e,t,n,r)):la(e,t,n,r)}function Zf(e){return(e&128)===0}function ed(e,t,n){return Br(e,t|128,n)}function la(e,t,n,r){td(t,n,i=>i?r(i):Br(n,e,r))}function Br(e,t,n){return Re.chmod(e,t,n)}function td(e,t,n){Re.stat(e,(r,i)=>r?n(r):Yf(t,i.atime,i.mtime,n))}function nd(e,t,n,r,i,o){return t?El(n,r,i,o):rd(e.mode,n,r,i,o)}function rd(e,t,n,r,i){Re.mkdir(n,o=>{if(o)return i(o);El(t,n,r,a=>a?i(a):Br(n,e,i))})}function El(e,t,n,r){Re.readdir(e,(i,o)=>i?r(i):yl(o,e,t,n,r))}function yl(e,t,n,r,i){const o=e.pop();return o?id(e,o,t,n,r,i):i()}function id(e,t,n,r,i,o){const a=An.join(n,t),s=An.join(r,t);Sn.checkPaths(a,s,"copy",i,(l,m)=>{if(l)return o(l);const{destStat:c}=m;Xf(c,a,s,i,f=>f?o(f):yl(e,n,r,i,o))})}function od(e,t,n,r,i){Re.readlink(t,(o,a)=>{if(o)return i(o);if(r.dereference&&(a=An.resolve(process.cwd(),a)),e)Re.readlink(n,(s,l)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?Re.symlink(a,n,i):i(s):(r.dereference&&(l=An.resolve(process.cwd(),l)),Sn.isSrcSubdir(a,l)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Sn.isSrcSubdir(l,a)?i(new Error(`Cannot overwrite '${l}' with '${a}'.`)):ad(a,n,i)));else return Re.symlink(a,n,i)})}function ad(e,t,n){Re.unlink(t,r=>r?n(r):Re.symlink(e,t,n))}var sd=zf;const we=be,Tn=Q,ld=ze.mkdirsSync,cd=dl.utimesMillisSync,Cn=tn;function ud(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=Cn.checkPathsSync(e,t,"copy",n);return Cn.checkParentPathsSync(e,r,t,"copy"),fd(i,e,t,n)}function fd(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const i=Tn.dirname(n);return we.existsSync(i)||ld(i),vl(e,t,n,r)}function dd(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return vl(e,t,n,r)}function vl(e,t,n,r){const o=(r.dereference?we.statSync:we.lstatSync)(t);if(o.isDirectory())return vd(o,e,t,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return hd(o,e,t,n,r);if(o.isSymbolicLink())return Ad(e,t,n,r);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function hd(e,t,n,r,i){return t?pd(e,n,r,i):wl(e,n,r,i)}function pd(e,t,n,r){if(r.overwrite)return we.unlinkSync(n),wl(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function wl(e,t,n,r){return we.copyFileSync(t,n),r.preserveTimestamps&&md(e.mode,t,n),ho(n,e.mode)}function md(e,t,n){return gd(e)&&Ed(n,e),yd(t,n)}function gd(e){return(e&128)===0}function Ed(e,t){return ho(e,t|128)}function ho(e,t){return we.chmodSync(e,t)}function yd(e,t){const n=we.statSync(e);return cd(t,n.atime,n.mtime)}function vd(e,t,n,r,i){return t?_l(n,r,i):wd(e.mode,n,r,i)}function wd(e,t,n,r){return we.mkdirSync(n),_l(t,n,r),ho(n,e)}function _l(e,t,n){we.readdirSync(e).forEach(r=>_d(r,e,t,n))}function _d(e,t,n,r){const i=Tn.join(t,e),o=Tn.join(n,e),{destStat:a}=Cn.checkPathsSync(i,o,"copy",r);return dd(a,i,o,r)}function Ad(e,t,n,r){let i=we.readlinkSync(t);if(r.dereference&&(i=Tn.resolve(process.cwd(),i)),e){let o;try{o=we.readlinkSync(n)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return we.symlinkSync(i,n);throw a}if(r.dereference&&(o=Tn.resolve(process.cwd(),o)),Cn.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(we.statSync(n).isDirectory()&&Cn.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Sd(i,n)}else return we.symlinkSync(i,n)}function Sd(e,t){return we.unlinkSync(t),we.symlinkSync(e,t)}var Td=ud;const Cd=$e.fromCallback;var po={copy:Cd(sd),copySync:Td};const ca=be,Al=Q,K=tl,$n=process.platform==="win32";function Sl(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||ca[n],n=n+"Sync",e[n]=e[n]||ca[n]}),e.maxBusyTries=e.maxBusyTries||3}function mo(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),K(e,"rimraf: missing path"),K.strictEqual(typeof e,"string","rimraf: path should be a string"),K.strictEqual(typeof n,"function","rimraf: callback function required"),K(t,"rimraf: invalid options argument provided"),K.strictEqual(typeof t,"object","rimraf: options should be object"),Sl(t),ua(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&r<t.maxBusyTries){r++;const a=r*100;return setTimeout(()=>ua(e,t,i),a)}o.code==="ENOENT"&&(o=null)}n(o)})}function ua(e,t,n){K(e),K(t),K(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&$n)return fa(e,t,r,n);if(i&&i.isDirectory())return Ar(e,t,r,n);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return n(null);if(o.code==="EPERM")return $n?fa(e,t,o,n):Ar(e,t,o,n);if(o.code==="EISDIR")return Ar(e,t,o,n)}return n(o)})})}function fa(e,t,n,r){K(e),K(t),K(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(o,a)=>{o?r(o.code==="ENOENT"?null:n):a.isDirectory()?Ar(e,t,n,r):t.unlink(e,r)})})}function da(e,t,n){let r;K(e),K(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?Sr(e,t,n):t.unlinkSync(e)}function Ar(e,t,n,r){K(e),K(t),K(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?$d(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function $d(e,t,n){K(e),K(t),K(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let o=i.length,a;if(o===0)return t.rmdir(e,n);i.forEach(s=>{mo(Al.join(e,s),t,l=>{if(!a){if(l)return n(a=l);--o===0&&t.rmdir(e,n)}})})})}function Tl(e,t){let n;t=t||{},Sl(t),K(e,"rimraf: missing path"),K.strictEqual(typeof e,"string","rimraf: path should be a string"),K(t,"rimraf: missing options"),K.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&$n&&da(e,t,r)}try{n&&n.isDirectory()?Sr(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return $n?da(e,t,r):Sr(e,t,r);if(r.code!=="EISDIR")throw r;Sr(e,t,r)}}function Sr(e,t,n){K(e),K(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")bd(e,t);else if(r.code!=="ENOENT")throw r}}function bd(e,t){if(K(e),K(t),t.readdirSync(e).forEach(n=>Tl(Al.join(e,n),t)),$n){const n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}var Od=mo;mo.sync=Tl;const br=be,Id=$e.fromCallback,Cl=Od;function Rd(e,t){if(br.rm)return br.rm(e,{recursive:!0,force:!0},t);Cl(e,t)}function Pd(e){if(br.rmSync)return br.rmSync(e,{recursive:!0,force:!0});Cl.sync(e)}var Hr={remove:Id(Rd),removeSync:Pd};const Nd=$e.fromPromise,$l=Pt,bl=Q,Ol=ze,Il=Hr,ha=Nd(async function(t){let n;try{n=await $l.readdir(t)}catch{return Ol.mkdirs(t)}return Promise.all(n.map(r=>Il.remove(bl.join(t,r))))});function pa(e){let t;try{t=$l.readdirSync(e)}catch{return Ol.mkdirsSync(e)}t.forEach(n=>{n=bl.join(e,n),Il.removeSync(n)})}var Dd={emptyDirSync:pa,emptydirSync:pa,emptyDir:ha,emptydir:ha};const Fd=$e.fromCallback,Rl=Q,st=be,Pl=ze;function xd(e,t){function n(){st.writeFile(e,"",r=>{if(r)return t(r);t()})}st.stat(e,(r,i)=>{if(!r&&i.isFile())return t();const o=Rl.dirname(e);st.stat(o,(a,s)=>{if(a)return a.code==="ENOENT"?Pl.mkdirs(o,l=>{if(l)return t(l);n()}):t(a);s.isDirectory()?n():st.readdir(o,l=>{if(l)return t(l)})})})}function Ld(e){let t;try{t=st.statSync(e)}catch{}if(t&&t.isFile())return;const n=Rl.dirname(e);try{st.statSync(n).isDirectory()||st.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")Pl.mkdirsSync(n);else throw r}st.writeFileSync(e,"")}var Ud={createFile:Fd(xd),createFileSync:Ld};const kd=$e.fromCallback,Nl=Q,at=be,Dl=ze,Md=Nt.pathExists,{areIdentical:Fl}=tn;function Bd(e,t,n){function r(i,o){at.link(i,o,a=>{if(a)return n(a);n(null)})}at.lstat(t,(i,o)=>{at.lstat(e,(a,s)=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),n(a);if(o&&Fl(s,o))return n(null);const l=Nl.dirname(t);Md(l,(m,c)=>{if(m)return n(m);if(c)return r(e,t);Dl.mkdirs(l,f=>{if(f)return n(f);r(e,t)})})})})}function Hd(e,t){let n;try{n=at.lstatSync(t)}catch{}try{const o=at.lstatSync(e);if(n&&Fl(o,n))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const r=Nl.dirname(t);return at.existsSync(r)||Dl.mkdirsSync(r),at.linkSync(e,t)}var jd={createLink:kd(Bd),createLinkSync:Hd};const lt=Q,yn=be,qd=Nt.pathExists;function Gd(e,t,n){if(lt.isAbsolute(e))return yn.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{const r=lt.dirname(t),i=lt.join(r,e);return qd(i,(o,a)=>o?n(o):a?n(null,{toCwd:i,toDst:e}):yn.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),n(s)):n(null,{toCwd:e,toDst:lt.relative(r,e)})))}}function Wd(e,t){let n;if(lt.isAbsolute(e)){if(n=yn.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const r=lt.dirname(t),i=lt.join(r,e);if(n=yn.existsSync(i),n)return{toCwd:i,toDst:e};if(n=yn.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:lt.relative(r,e)}}}var Vd={symlinkPaths:Gd,symlinkPathsSync:Wd};const xl=be;function Yd(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);xl.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function zd(e,t){let n;if(t)return t;try{n=xl.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var Xd={symlinkType:Yd,symlinkTypeSync:zd};const Kd=$e.fromCallback,Ll=Q,Me=Pt,Ul=ze,Jd=Ul.mkdirs,Qd=Ul.mkdirsSync,kl=Vd,Zd=kl.symlinkPaths,eh=kl.symlinkPathsSync,Ml=Xd,th=Ml.symlinkType,nh=Ml.symlinkTypeSync,rh=Nt.pathExists,{areIdentical:Bl}=tn;function ih(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,Me.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Me.stat(e),Me.stat(t)]).then(([a,s])=>{if(Bl(a,s))return r(null);ma(e,t,n,r)}):ma(e,t,n,r)})}function ma(e,t,n,r){Zd(e,t,(i,o)=>{if(i)return r(i);e=o.toDst,th(o.toCwd,n,(a,s)=>{if(a)return r(a);const l=Ll.dirname(t);rh(l,(m,c)=>{if(m)return r(m);if(c)return Me.symlink(e,t,s,r);Jd(l,f=>{if(f)return r(f);Me.symlink(e,t,s,r)})})})})}function oh(e,t,n){let r;try{r=Me.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const s=Me.statSync(e),l=Me.statSync(t);if(Bl(s,l))return}const i=eh(e,t);e=i.toDst,n=nh(i.toCwd,n);const o=Ll.dirname(t);return Me.existsSync(o)||Qd(o),Me.symlinkSync(e,t,n)}var ah={createSymlink:Kd(ih),createSymlinkSync:oh};const{createFile:ga,createFileSync:Ea}=Ud,{createLink:ya,createLinkSync:va}=jd,{createSymlink:wa,createSymlinkSync:_a}=ah;var sh={createFile:ga,createFileSync:Ea,ensureFile:ga,ensureFileSync:Ea,createLink:ya,createLinkSync:va,ensureLink:ya,ensureLinkSync:va,createSymlink:wa,createSymlinkSync:_a,ensureSymlink:wa,ensureSymlinkSync:_a};function lh(e,{EOL:t=`
`,finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+o}function ch(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var go={stringify:lh,stripBom:ch};let Jt;try{Jt=be}catch{Jt=mt}const jr=$e,{stringify:Hl,stripBom:jl}=go;async function uh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||Jt,r="throws"in t?t.throws:!0;let i=await jr.fromCallback(n.readFile)(e,t);i=jl(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(a){if(r)throw a.message=`${e}: ${a.message}`,a;return null}return o}const fh=jr.fromPromise(uh);function dh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||Jt,r="throws"in t?t.throws:!0;try{let i=n.readFileSync(e,t);return i=jl(i),JSON.parse(i,t.reviver)}catch(i){if(r)throw i.message=`${e}: ${i.message}`,i;return null}}async function hh(e,t,n={}){const r=n.fs||Jt,i=Hl(t,n);await jr.fromCallback(r.writeFile)(e,i,n)}const ph=jr.fromPromise(hh);function mh(e,t,n={}){const r=n.fs||Jt,i=Hl(t,n);return r.writeFileSync(e,i,n)}var gh={readFile:fh,readFileSync:dh,writeFile:ph,writeFileSync:mh};const sr=gh;var Eh={readJson:sr.readFile,readJsonSync:sr.readFileSync,writeJson:sr.writeFile,writeJsonSync:sr.writeFileSync};const yh=$e.fromCallback,vn=be,ql=Q,Gl=ze,vh=Nt.pathExists;function wh(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");const i=ql.dirname(e);vh(i,(o,a)=>{if(o)return r(o);if(a)return vn.writeFile(e,t,n,r);Gl.mkdirs(i,s=>{if(s)return r(s);vn.writeFile(e,t,n,r)})})}function _h(e,...t){const n=ql.dirname(e);if(vn.existsSync(n))return vn.writeFileSync(e,...t);Gl.mkdirsSync(n),vn.writeFileSync(e,...t)}var Eo={outputFile:yh(wh),outputFileSync:_h};const{stringify:Ah}=go,{outputFile:Sh}=Eo;async function Th(e,t,n={}){const r=Ah(t,n);await Sh(e,r,n)}var Ch=Th;const{stringify:$h}=go,{outputFileSync:bh}=Eo;function Oh(e,t,n){const r=$h(t,n);bh(e,r,n)}var Ih=Oh;const Rh=$e.fromPromise,Ce=Eh;Ce.outputJson=Rh(Ch);Ce.outputJsonSync=Ih;Ce.outputJSON=Ce.outputJson;Ce.outputJSONSync=Ce.outputJsonSync;Ce.writeJSON=Ce.writeJson;Ce.writeJSONSync=Ce.writeJsonSync;Ce.readJSON=Ce.readJson;Ce.readJSONSync=Ce.readJsonSync;var Ph=Ce;const Nh=be,Wi=Q,Dh=po.copy,Wl=Hr.remove,Fh=ze.mkdirp,xh=Nt.pathExists,Aa=tn;function Lh(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};const i=n.overwrite||n.clobber||!1;Aa.checkPaths(e,t,"move",n,(o,a)=>{if(o)return r(o);const{srcStat:s,isChangingCase:l=!1}=a;Aa.checkParentPaths(e,s,t,"move",m=>{if(m)return r(m);if(Uh(t))return Sa(e,t,i,l,r);Fh(Wi.dirname(t),c=>c?r(c):Sa(e,t,i,l,r))})})}function Uh(e){const t=Wi.dirname(e);return Wi.parse(t).root===t}function Sa(e,t,n,r,i){if(r)return Ei(e,t,n,i);if(n)return Wl(t,o=>o?i(o):Ei(e,t,n,i));xh(t,(o,a)=>o?i(o):a?i(new Error("dest already exists.")):Ei(e,t,n,i))}function Ei(e,t,n,r){Nh.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):kh(e,t,n,r):r())}function kh(e,t,n,r){Dh(e,t,{overwrite:n,errorOnExist:!0},o=>o?r(o):Wl(e,r))}var Mh=Lh;const Vl=be,Vi=Q,Bh=po.copySync,Yl=Hr.removeSync,Hh=ze.mkdirpSync,Ta=tn;function jh(e,t,n){n=n||{};const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Ta.checkPathsSync(e,t,"move",n);return Ta.checkParentPathsSync(e,i,t,"move"),qh(t)||Hh(Vi.dirname(t)),Gh(e,t,r,o)}function qh(e){const t=Vi.dirname(e);return Vi.parse(t).root===t}function Gh(e,t,n,r){if(r)return yi(e,t,n);if(n)return Yl(t),yi(e,t,n);if(Vl.existsSync(t))throw new Error("dest already exists.");return yi(e,t,n)}function yi(e,t,n){try{Vl.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return Wh(e,t,n)}}function Wh(e,t,n){return Bh(e,t,{overwrite:n,errorOnExist:!0}),Yl(e)}var Vh=jh;const Yh=$e.fromCallback;var zh={move:Yh(Mh),moveSync:Vh},gt={...Pt,...po,...Dd,...sh,...Ph,...ze,...zh,...Eo,...Nt,...Hr},Ze={},ut={},he={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.CancellationError=ft.CancellationToken=void 0;const Xh=nl;class Kh extends Xh.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new Yi);const n=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}};let r=null;return new Promise((i,o)=>{let a=null;if(r=()=>{try{a!=null&&(a(),a=null)}finally{o(new Yi)}},this.cancelled){r();return}this.onCancel(r),t(i,o,s=>{a=s})}).then(i=>(n(),i)).catch(i=>{throw n(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}ft.CancellationToken=Kh;class Yi extends Error{constructor(){super("cancelled")}}ft.CancellationError=Yi;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.newError=Jh;function Jh(e,t){const n=new Error(e);return n.code=t,n}var Te={},zi={exports:{}},lr={exports:{}},vi,Ca;function Qh(){if(Ca)return vi;Ca=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;vi=function(c,f){f=f||{};var h=typeof c;if(h==="string"&&c.length>0)return a(c);if(h==="number"&&isFinite(c))return f.long?l(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function a(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var h=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function s(c){var f=Math.abs(c);return f>=r?Math.round(c/r)+"d":f>=n?Math.round(c/n)+"h":f>=t?Math.round(c/t)+"m":f>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var f=Math.abs(c);return f>=r?m(c,f,r,"day"):f>=n?m(c,f,n,"hour"):f>=t?m(c,f,t,"minute"):f>=e?m(c,f,e,"second"):c+" ms"}function m(c,f,h,g){var _=f>=h*1.5;return Math.round(c/h)+" "+g+(_?"s":"")}return vi}var wi,$a;function zl(){if($a)return wi;$a=1;function e(t){r.debug=r,r.default=r,r.coerce=m,r.disable=s,r.enable=o,r.enabled=l,r.humanize=Qh(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let h=0;for(let g=0;g<f.length;g++)h=(h<<5)-h+f.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=n;function r(f){let h,g=null,_,y;function A(...T){if(!A.enabled)return;const S=A,D=Number(new Date),x=D-(h||D);S.diff=x,S.prev=h,S.curr=D,h=D,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let Z=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(V,Ne)=>{if(V==="%%")return"%";Z++;const E=r.formatters[Ne];if(typeof E=="function"){const q=T[Z];V=E.call(S,q),T.splice(Z,1),Z--}return V}),r.formatArgs.call(S,T),(S.log||r.log).apply(S,T)}return A.namespace=f,A.useColors=r.useColors(),A.color=r.selectColor(f),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(_!==r.namespaces&&(_=r.namespaces,y=r.enabled(f)),y),set:T=>{g=T}}),typeof r.init=="function"&&r.init(A),A}function i(f,h){const g=r(this.namespace+(typeof h>"u"?":":h)+f);return g.log=this.log,g}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of h)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function a(f,h){let g=0,_=0,y=-1,A=0;for(;g<f.length;)if(_<h.length&&(h[_]===f[g]||h[_]==="*"))h[_]==="*"?(y=_,A=g,_++):(g++,_++);else if(y!==-1)_=y+1,A++,g=A;else return!1;for(;_<h.length&&h[_]==="*";)_++;return _===h.length}function s(){const f=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),f}function l(f){for(const h of r.skips)if(a(f,h))return!1;for(const h of r.names)if(a(f,h))return!0;return!1}function m(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return wi=e,wi}var ba;function Zh(){return ba||(ba=1,function(e,t){t.formatArgs=r,t.save=i,t.load=o,t.useColors=n,t.storage=a(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;l.splice(1,0,m,"color: inherit");let c=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(c++,h==="%c"&&(f=c))}),l.splice(f,0,m)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function a(){try{return localStorage}catch{}}e.exports=zl()(t);const{formatters:s}=e.exports;s.j=function(l){try{return JSON.stringify(l)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}}(lr,lr.exports)),lr.exports}var cr={exports:{}},_i,Oa;function ep(){return Oa||(Oa=1,_i=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}),_i}var Ai,Ia;function tp(){if(Ia)return Ai;Ia=1;const e=kr,t=rl,n=ep(),{env:r}=process;let i;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?i=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=1),"FORCE_COLOR"in r&&(r.FORCE_COLOR==="true"?i=1:r.FORCE_COLOR==="false"?i=0:i=r.FORCE_COLOR.length===0?1:Math.min(parseInt(r.FORCE_COLOR,10),3));function o(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function a(l,m){if(i===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(l&&!m&&i===void 0)return 0;const c=i||0;if(r.TERM==="dumb")return c;if(process.platform==="win32"){const f=e.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in r)||r.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if(r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in r){const f=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:c}function s(l){const m=a(l,l&&l.isTTY);return o(m)}return Ai={supportsColor:s,stdout:o(a(!0,t.isatty(1))),stderr:o(a(!0,t.isatty(2)))},Ai}var Ra;function np(){return Ra||(Ra=1,function(e,t){const n=rl,r=so;t.init=c,t.log=s,t.formatArgs=o,t.save=l,t.load=m,t.useColors=i,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const h=tp();h&&(h.stderr||h).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(h=>/^debug_/i.test(h)).reduce((h,g)=>{const _=g.substring(6).toLowerCase().replace(/_([a-z])/g,(A,T)=>T.toUpperCase());let y=process.env[g];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),h[_]=y,h},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}function o(h){const{namespace:g,useColors:_}=this;if(_){const y=this.color,A="\x1B[3"+(y<8?y:"8;5;"+y),T=`  ${A};1m${g} \x1B[0m`;h[0]=T+h[0].split(`
`).join(`
`+T),h.push(A+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else h[0]=a()+g+" "+h[0]}function a(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...h){return process.stderr.write(r.formatWithOptions(t.inspectOpts,...h)+`
`)}function l(h){h?process.env.DEBUG=h:delete process.env.DEBUG}function m(){return process.env.DEBUG}function c(h){h.inspectOpts={};const g=Object.keys(t.inspectOpts);for(let _=0;_<g.length;_++)h.inspectOpts[g[_]]=t.inspectOpts[g[_]]}e.exports=zl()(t);const{formatters:f}=e.exports;f.o=function(h){return this.inspectOpts.colors=this.useColors,r.inspect(h,this.inspectOpts).split(`
`).map(g=>g.trim()).join(" ")},f.O=function(h){return this.inspectOpts.colors=this.useColors,r.inspect(h,this.inspectOpts)}}(cr,cr.exports)),cr.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?zi.exports=Zh():zi.exports=np();var rp=zi.exports,Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ProgressCallbackTransform=void 0;const ip=Un;class op extends ip.Transform{constructor(t,n,r){super(),this.total=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}Bn.ProgressCallbackTransform=op;Object.defineProperty(Te,"__esModule",{value:!0});Te.DigestTransform=Te.HttpExecutor=Te.HttpError=void 0;Te.createHttpError=Xi;Te.parseJson=hp;Te.configureRequestOptionsFromUrl=Kl;Te.configureRequestUrl=vo;Te.safeGetHeader=Xt;Te.configureRequestOptions=Ir;Te.safeStringifyJson=Rr;const ap=kn,sp=rp,lp=mt,cp=Un,Xl=en,up=ft,Pa=nn,fp=Bn,fn=(0,sp.default)("electron-builder");function Xi(e,t=null){return new yo(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+Rr(e.headers),t)}const dp=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class yo extends Error{constructor(t,n=`HTTP error: ${dp.get(t)||t}`,r=null){super(n),this.statusCode=t,this.description=r,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Te.HttpError=yo;function hp(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class Or{constructor(){this.maxRedirects=10}request(t,n=new up.CancellationToken,r){Ir(t);const i=r==null?void 0:JSON.stringify(r),o=i?Buffer.from(i):void 0;if(o!=null){fn(i);const{headers:a,...s}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":o.length,...a},...s}}return this.doApiRequest(t,n,a=>a.end(o))}doApiRequest(t,n,r,i=0){return fn.enabled&&fn(`Request: ${Rr(t)}`),n.createPromise((o,a,s)=>{const l=this.createRequest(t,m=>{try{this.handleResponse(m,t,n,o,a,i,r)}catch(c){a(c)}});this.addErrorAndTimeoutHandlers(l,a,t.timeout),this.addRedirectHandlers(l,t,a,i,m=>{this.doApiRequest(m,n,r,i).then(o).catch(a)}),r(l,a),s(()=>l.abort())})}addRedirectHandlers(t,n,r,i,o){}addErrorAndTimeoutHandlers(t,n,r=60*1e3){this.addTimeOutHandler(t,n,r),t.on("error",n),t.on("aborted",()=>{n(new Error("Request has been aborted by the server"))})}handleResponse(t,n,r,i,o,a,s){var l;if(fn.enabled&&fn(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${Rr(n)}`),t.statusCode===404){o(Xi(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const m=(l=t.statusCode)!==null&&l!==void 0?l:0,c=m>=300&&m<400,f=Xt(t,"location");if(c&&f!=null){if(a>this.maxRedirects){o(this.createMaxRedirectError());return}this.doApiRequest(Or.prepareRedirectUrlOptions(f,n),r,s,a).then(i).catch(o);return}t.setEncoding("utf8");let h="";t.on("error",o),t.on("data",g=>h+=g),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const g=Xt(t,"content-type"),_=g!=null&&(Array.isArray(g)?g.find(y=>y.includes("json"))!=null:g.includes("json"));o(Xi(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

          Data:
          ${_?JSON.stringify(JSON.parse(h)):h}
          `))}else i(h.length===0?null:h)}catch(g){o(g)}})}async downloadToBuffer(t,n){return await n.cancellationToken.createPromise((r,i,o)=>{const a=[],s={headers:n.headers||void 0,redirect:"manual"};vo(t,s),Ir(s),this.doDownload(s,{destination:null,options:n,onCancel:o,callback:l=>{l==null?r(Buffer.concat(a)):i(l)},responseHandler:(l,m)=>{let c=0;l.on("data",f=>{if(c+=f.length,c>524288e3){m(new Error("Maximum allowed size is 500 MB"));return}a.push(f)}),l.on("end",()=>{m(null)})}},0)})}doDownload(t,n,r){const i=this.createRequest(t,o=>{if(o.statusCode>=400){n.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${o.statusCode}: ${o.statusMessage}`));return}o.on("error",n.callback);const a=Xt(o,"location");if(a!=null){r<this.maxRedirects?this.doDownload(Or.prepareRedirectUrlOptions(a,t),n,r++):n.callback(this.createMaxRedirectError());return}n.responseHandler==null?mp(n,o):n.responseHandler(o,n.callback)});this.addErrorAndTimeoutHandlers(i,n.callback,t.timeout),this.addRedirectHandlers(i,t,n.callback,r,o=>{this.doDownload(o,n,r++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,n,r){t.on("socket",i=>{i.setTimeout(r,()=>{t.abort(),n(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,n){const r=Kl(t,{...n}),i=r.headers;if(i!=null&&i.authorization){const o=new Xl.URL(t);(o.hostname.endsWith(".amazonaws.com")||o.searchParams.has("X-Amz-Credential"))&&delete i.authorization}return r}static retryOnServerError(t,n=3){for(let r=0;;r++)try{return t()}catch(i){if(r<n&&(i instanceof yo&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}Te.HttpExecutor=Or;function Kl(e,t){const n=Ir(t);return vo(new Xl.URL(e),n),n}function vo(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class Ki extends cp.Transform{get actual(){return this._actual}constructor(t,n="sha512",r="base64"){super(),this.expected=t,this.algorithm=n,this.encoding=r,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,ap.createHash)(n)}_transform(t,n,r){this.digester.update(t),r(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(n){t(n);return}t(null)}validate(){if(this._actual==null)throw(0,Pa.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,Pa.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Te.DigestTransform=Ki;function pp(e,t,n){return e!=null&&t!=null&&e!==t?(n(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function Xt(e,t){const n=e.headers[t];return n==null?null:Array.isArray(n)?n.length===0?null:n[n.length-1]:n}function mp(e,t){if(!pp(Xt(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const n=[];if(e.options.onProgress!=null){const a=Xt(t,"content-length");a!=null&&n.push(new fp.ProgressCallbackTransform(parseInt(a,10),e.options.cancellationToken,e.options.onProgress))}const r=e.options.sha512;r!=null?n.push(new Ki(r,"sha512",r.length===128&&!r.includes("+")&&!r.includes("Z")&&!r.includes("=")?"hex":"base64")):e.options.sha2!=null&&n.push(new Ki(e.options.sha2,"sha256","hex"));const i=(0,lp.createWriteStream)(e.destination);n.push(i);let o=t;for(const a of n)a.on("error",s=>{i.close(),e.options.cancellationToken.cancelled||e.callback(s)}),o=o.pipe(a);i.on("finish",()=>{i.close(e.callback)})}function Ir(e,t,n){n!=null&&(e.method=n),e.headers={...e.headers};const r=e.headers;return t!=null&&(r.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),r["User-Agent"]==null&&(r["User-Agent"]="electron-builder"),(n==null||n==="GET"||r["Cache-Control"]==null)&&(r["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function Rr(e,t){return JSON.stringify(e,(n,r)=>n.endsWith("Authorization")||n.endsWith("authorization")||n.endsWith("Password")||n.endsWith("PASSWORD")||n.endsWith("Token")||n.includes("password")||n.includes("token")||t!=null&&t.has(n)?"<stripped sensitive data>":r,2)}var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.MemoLazy=void 0;class gp{constructor(t,n){this.selector=t,this.creator=n,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&Jl(this.selected,t))return this._value;this.selected=t;const n=this.creator(t);return this.value=n,n}set value(t){this._value=t}}qr.MemoLazy=gp;function Jl(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(a=>Jl(e[a],t[a]))}return e===t}var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.githubUrl=Ep;Gr.getS3LikeProviderBaseUrl=yp;function Ep(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function yp(e){const t=e.provider;if(t==="s3")return vp(e);if(t==="spaces")return wp(e);throw new Error(`Not supported provider: ${t}`)}function vp(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return Ql(t,e.path)}function Ql(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function wp(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return Ql(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.retry=Zl;const _p=ft;async function Zl(e,t,n,r=0,i=0,o){var a;const s=new _p.CancellationToken;try{return await e()}catch(l){if((!((a=o==null?void 0:o(l))!==null&&a!==void 0)||a)&&t>0&&!s.cancelled)return await new Promise(m=>setTimeout(m,n+r*i)),await Zl(e,t-1,n,r,i+1,o);throw l}}var _o={};Object.defineProperty(_o,"__esModule",{value:!0});_o.parseDn=Ap;function Ap(e){let t=!1,n=null,r="",i=0;e=e.trim();const o=new Map;for(let a=0;a<=e.length;a++){if(a===e.length){n!==null&&o.set(n,r);break}const s=e[a];if(t){if(s==='"'){t=!1;continue}}else{if(s==='"'){t=!0;continue}if(s==="\\"){a++;const l=parseInt(e.slice(a,a+2),16);Number.isNaN(l)?r+=e[a]:(a++,r+=String.fromCharCode(l));continue}if(n===null&&s==="="){n=r,r="";continue}if(s===","||s===";"||s==="+"){n!==null&&o.set(n,r),n=null,r="";continue}}if(s===" "&&!t){if(r.length===0)continue;if(a>i){let l=a;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||n===null&&e[i]==="="||n!==null&&e[i]==="+"){a=i-1;continue}}r+=s}return o}var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.nil=Qt.UUID=void 0;const ec=kn,tc=nn,Sp="options.name must be either a string or a Buffer",Na=(0,ec.randomBytes)(16);Na[0]=Na[0]|1;const Tr={},W=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);Tr[t]=e,W[e]=t}class Rt{constructor(t){this.ascii=null,this.binary=null;const n=Rt.check(t);if(!n)throw new Error("not a UUID");this.version=n.version,n.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,n){return Tp(t,"sha1",80,n)}toString(){return this.ascii==null&&(this.ascii=Cp(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,n=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(Tr[t[14]+t[15]]&240)>>4,variant:Da((Tr[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<n+16)return!1;let r=0;for(;r<16&&t[n+r]===0;r++);return r===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[n+6]&240)>>4,variant:Da((t[n+8]&224)>>5),format:"binary"}}throw(0,tc.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const n=Buffer.allocUnsafe(16);let r=0;for(let i=0;i<16;i++)n[i]=Tr[t[r++]+t[r++]],(i===3||i===5||i===7||i===9)&&(r+=1);return n}}Qt.UUID=Rt;Rt.OID=Rt.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function Da(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var wn;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(wn||(wn={}));function Tp(e,t,n,r,i=wn.ASCII){const o=(0,ec.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,tc.newError)(Sp,"ERR_INVALID_UUID_NAME");o.update(r),o.update(e);const s=o.digest();let l;switch(i){case wn.BINARY:s[6]=s[6]&15|n,s[8]=s[8]&63|128,l=s;break;case wn.OBJECT:s[6]=s[6]&15|n,s[8]=s[8]&63|128,l=new Rt(s);break;default:l=W[s[0]]+W[s[1]]+W[s[2]]+W[s[3]]+"-"+W[s[4]]+W[s[5]]+"-"+W[s[6]&15|n]+W[s[7]]+"-"+W[s[8]&63|128]+W[s[9]]+"-"+W[s[10]]+W[s[11]]+W[s[12]]+W[s[13]]+W[s[14]]+W[s[15]];break}return l}function Cp(e){return W[e[0]]+W[e[1]]+W[e[2]]+W[e[3]]+"-"+W[e[4]]+W[e[5]]+"-"+W[e[6]]+W[e[7]]+"-"+W[e[8]]+W[e[9]]+"-"+W[e[10]]+W[e[11]]+W[e[12]]+W[e[13]]+W[e[14]]+W[e[15]]}Qt.nil=new Rt("00000000-0000-0000-0000-000000000000");var Hn={},nc={};(function(e){(function(t){t.parser=function(d,u){return new r(d,u)},t.SAXParser=r,t.SAXStream=c,t.createStream=m,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(d,u){if(!(this instanceof r))return new r(d,u);var C=this;o(C),C.q=C.c="",C.bufferCheckPosition=t.MAX_BUFFER_LENGTH,C.opt=u||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!d,C.noscript=!!(d||C.opt.noscript),C.state=E.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(y)),C.opt.unquotedAttributeValues===void 0&&(C.opt.unquotedAttributeValues=!d),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),B(C,"onready")}Object.create||(Object.create=function(d){function u(){}u.prototype=d;var C=new u;return C}),Object.keys||(Object.keys=function(d){var u=[];for(var C in d)d.hasOwnProperty(C)&&u.push(C);return u});function i(d){for(var u=Math.max(t.MAX_BUFFER_LENGTH,10),C=0,w=0,Y=n.length;w<Y;w++){var ee=d[n[w]].length;if(ee>u)switch(n[w]){case"textNode":z(d);break;case"cdata":M(d,"oncdata",d.cdata),d.cdata="";break;case"script":M(d,"onscript",d.script),d.script="";break;default:b(d,"Max buffer length exceeded: "+n[w])}C=Math.max(C,ee)}var re=t.MAX_BUFFER_LENGTH-C;d.bufferCheckPosition=re+d.position}function o(d){for(var u=0,C=n.length;u<C;u++)d[n[u]]=""}function a(d){z(d),d.cdata!==""&&(M(d,"oncdata",d.cdata),d.cdata=""),d.script!==""&&(M(d,"onscript",d.script),d.script="")}r.prototype={end:function(){P(this)},write:qe,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var l=t.EVENTS.filter(function(d){return d!=="error"&&d!=="end"});function m(d,u){return new c(d,u)}function c(d,u){if(!(this instanceof c))return new c(d,u);s.apply(this),this._parser=new r(d,u),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(w){C.emit("error",w),C._parser.error=null},this._decoder=null,l.forEach(function(w){Object.defineProperty(C,"on"+w,{get:function(){return C._parser["on"+w]},set:function(Y){if(!Y)return C.removeAllListeners(w),C._parser["on"+w]=Y,Y;C.on(w,Y)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(d){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(d)){if(!this._decoder){var u=Ef.StringDecoder;this._decoder=new u("utf8")}d=this._decoder.write(d)}return this._parser.write(d.toString()),this.emit("data",d),!0},c.prototype.end=function(d){return d&&d.length&&this.write(d),this._parser.end(),!0},c.prototype.on=function(d,u){var C=this;return!C._parser["on"+d]&&l.indexOf(d)!==-1&&(C._parser["on"+d]=function(){var w=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);w.splice(0,0,d),C.emit.apply(C,w)}),s.prototype.on.call(C,d,u)};var f="[CDATA[",h="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",y={xml:g,xmlns:_},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(d){return d===" "||d===`
`||d==="\r"||d==="	"}function Z(d){return d==='"'||d==="'"}function oe(d){return d===">"||x(d)}function V(d,u){return d.test(u)}function Ne(d,u){return!V(d,u)}var E=0;t.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(d){var u=t.ENTITIES[d],C=typeof u=="number"?String.fromCharCode(u):u;t.ENTITIES[d]=C});for(var q in t.STATE)t.STATE[t.STATE[q]]=q;E=t.STATE;function B(d,u,C){d[u]&&d[u](C)}function M(d,u,C){d.textNode&&z(d),B(d,u,C)}function z(d){d.textNode=I(d.opt,d.textNode),d.textNode&&B(d,"ontext",d.textNode),d.textNode=""}function I(d,u){return d.trim&&(u=u.trim()),d.normalize&&(u=u.replace(/\s+/g," ")),u}function b(d,u){return z(d),d.trackPosition&&(u+=`
Line: `+d.line+`
Column: `+d.column+`
Char: `+d.c),u=new Error(u),d.error=u,B(d,"onerror",u),d}function P(d){return d.sawRoot&&!d.closedRoot&&$(d,"Unclosed root tag"),d.state!==E.BEGIN&&d.state!==E.BEGIN_WHITESPACE&&d.state!==E.TEXT&&b(d,"Unexpected end"),z(d),d.c="",d.closed=!0,B(d,"onend"),r.call(d,d.strict,d.opt),d}function $(d,u){if(typeof d!="object"||!(d instanceof r))throw new Error("bad call to strictFail");d.strict&&b(d,u)}function N(d){d.strict||(d.tagName=d.tagName[d.looseCase]());var u=d.tags[d.tags.length-1]||d,C=d.tag={name:d.tagName,attributes:{}};d.opt.xmlns&&(C.ns=u.ns),d.attribList.length=0,M(d,"onopentagstart",C)}function R(d,u){var C=d.indexOf(":"),w=C<0?["",d]:d.split(":"),Y=w[0],ee=w[1];return u&&d==="xmlns"&&(Y="xmlns",ee=""),{prefix:Y,local:ee}}function k(d){if(d.strict||(d.attribName=d.attribName[d.looseCase]()),d.attribList.indexOf(d.attribName)!==-1||d.tag.attributes.hasOwnProperty(d.attribName)){d.attribName=d.attribValue="";return}if(d.opt.xmlns){var u=R(d.attribName,!0),C=u.prefix,w=u.local;if(C==="xmlns")if(w==="xml"&&d.attribValue!==g)$(d,"xml: prefix must be bound to "+g+`
Actual: `+d.attribValue);else if(w==="xmlns"&&d.attribValue!==_)$(d,"xmlns: prefix must be bound to "+_+`
Actual: `+d.attribValue);else{var Y=d.tag,ee=d.tags[d.tags.length-1]||d;Y.ns===ee.ns&&(Y.ns=Object.create(ee.ns)),Y.ns[w]=d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,M(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function G(d,u){if(d.opt.xmlns){var C=d.tag,w=R(d.tagName);C.prefix=w.prefix,C.local=w.local,C.uri=C.ns[w.prefix]||"",C.prefix&&!C.uri&&($(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),C.uri=w.prefix);var Y=d.tags[d.tags.length-1]||d;C.ns&&Y.ns!==C.ns&&Object.keys(C.ns).forEach(function(Kn){M(d,"onopennamespace",{prefix:Kn,uri:C.ns[Kn]})});for(var ee=0,re=d.attribList.length;ee<re;ee++){var pe=d.attribList[ee],ye=pe[0],et=pe[1],le=R(ye,!0),Ue=le.prefix,si=le.local,Xn=Ue===""?"":C.ns[Ue]||"",an={name:ye,value:et,prefix:Ue,local:si,uri:Xn};Ue&&Ue!=="xmlns"&&!Xn&&($(d,"Unbound namespace prefix: "+JSON.stringify(Ue)),an.uri=Ue),d.tag.attributes[ye]=an,M(d,"onattribute",an)}d.attribList.length=0}d.tag.isSelfClosing=!!u,d.sawRoot=!0,d.tags.push(d.tag),M(d,"onopentag",d.tag),u||(!d.noscript&&d.tagName.toLowerCase()==="script"?d.state=E.SCRIPT:d.state=E.TEXT,d.tag=null,d.tagName=""),d.attribName=d.attribValue="",d.attribList.length=0}function H(d){if(!d.tagName){$(d,"Weird empty close tag."),d.textNode+="</>",d.state=E.TEXT;return}if(d.script){if(d.tagName!=="script"){d.script+="</"+d.tagName+">",d.tagName="",d.state=E.SCRIPT;return}M(d,"onscript",d.script),d.script=""}var u=d.tags.length,C=d.tagName;d.strict||(C=C[d.looseCase]());for(var w=C;u--;){var Y=d.tags[u];if(Y.name!==w)$(d,"Unexpected close tag");else break}if(u<0){$(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">",d.state=E.TEXT;return}d.tagName=C;for(var ee=d.tags.length;ee-- >u;){var re=d.tag=d.tags.pop();d.tagName=d.tag.name,M(d,"onclosetag",d.tagName);var pe={};for(var ye in re.ns)pe[ye]=re.ns[ye];var et=d.tags[d.tags.length-1]||d;d.opt.xmlns&&re.ns!==et.ns&&Object.keys(re.ns).forEach(function(le){var Ue=re.ns[le];M(d,"onclosenamespace",{prefix:le,uri:Ue})})}u===0&&(d.closedRoot=!0),d.tagName=d.attribValue=d.attribName="",d.attribList.length=0,d.state=E.TEXT}function X(d){var u=d.entity,C=u.toLowerCase(),w,Y="";return d.ENTITIES[u]?d.ENTITIES[u]:d.ENTITIES[C]?d.ENTITIES[C]:(u=C,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),w=parseInt(u,16),Y=w.toString(16)):(u=u.slice(1),w=parseInt(u,10),Y=w.toString(10))),u=u.replace(/^0+/,""),isNaN(w)||Y.toLowerCase()!==u?($(d,"Invalid character entity"),"&"+d.entity+";"):String.fromCodePoint(w))}function ue(d,u){u==="<"?(d.state=E.OPEN_WAKA,d.startTagPosition=d.position):x(u)||($(d,"Non-whitespace before first tag."),d.textNode=u,d.state=E.TEXT)}function U(d,u){var C="";return u<d.length&&(C=d.charAt(u)),C}function qe(d){var u=this;if(this.error)throw this.error;if(u.closed)return b(u,"Cannot write after close. Assign an onready handler.");if(d===null)return P(u);typeof d=="object"&&(d=d.toString());for(var C=0,w="";w=U(d,C++),u.c=w,!!w;)switch(u.trackPosition&&(u.position++,w===`
`?(u.line++,u.column=0):u.column++),u.state){case E.BEGIN:if(u.state=E.BEGIN_WHITESPACE,w==="\uFEFF")continue;ue(u,w);continue;case E.BEGIN_WHITESPACE:ue(u,w);continue;case E.TEXT:if(u.sawRoot&&!u.closedRoot){for(var Y=C-1;w&&w!=="<"&&w!=="&";)w=U(d,C++),w&&u.trackPosition&&(u.position++,w===`
`?(u.line++,u.column=0):u.column++);u.textNode+=d.substring(Y,C-1)}w==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=E.OPEN_WAKA,u.startTagPosition=u.position):(!x(w)&&(!u.sawRoot||u.closedRoot)&&$(u,"Text data outside of root node."),w==="&"?u.state=E.TEXT_ENTITY:u.textNode+=w);continue;case E.SCRIPT:w==="<"?u.state=E.SCRIPT_ENDING:u.script+=w;continue;case E.SCRIPT_ENDING:w==="/"?u.state=E.CLOSE_TAG:(u.script+="<"+w,u.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(w==="!")u.state=E.SGML_DECL,u.sgmlDecl="";else if(!x(w))if(V(A,w))u.state=E.OPEN_TAG,u.tagName=w;else if(w==="/")u.state=E.CLOSE_TAG,u.tagName="";else if(w==="?")u.state=E.PROC_INST,u.procInstName=u.procInstBody="";else{if($(u,"Unencoded <"),u.startTagPosition+1<u.position){var ee=u.position-u.startTagPosition;w=new Array(ee).join(" ")+w}u.textNode+="<"+w,u.state=E.TEXT}continue;case E.SGML_DECL:if(u.sgmlDecl+w==="--"){u.state=E.COMMENT,u.comment="",u.sgmlDecl="";continue}u.doctype&&u.doctype!==!0&&u.sgmlDecl?(u.state=E.DOCTYPE_DTD,u.doctype+="<!"+u.sgmlDecl+w,u.sgmlDecl=""):(u.sgmlDecl+w).toUpperCase()===f?(M(u,"onopencdata"),u.state=E.CDATA,u.sgmlDecl="",u.cdata=""):(u.sgmlDecl+w).toUpperCase()===h?(u.state=E.DOCTYPE,(u.doctype||u.sawRoot)&&$(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):w===">"?(M(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=E.TEXT):(Z(w)&&(u.state=E.SGML_DECL_QUOTED),u.sgmlDecl+=w);continue;case E.SGML_DECL_QUOTED:w===u.q&&(u.state=E.SGML_DECL,u.q=""),u.sgmlDecl+=w;continue;case E.DOCTYPE:w===">"?(u.state=E.TEXT,M(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=w,w==="["?u.state=E.DOCTYPE_DTD:Z(w)&&(u.state=E.DOCTYPE_QUOTED,u.q=w));continue;case E.DOCTYPE_QUOTED:u.doctype+=w,w===u.q&&(u.q="",u.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:w==="]"?(u.doctype+=w,u.state=E.DOCTYPE):w==="<"?(u.state=E.OPEN_WAKA,u.startTagPosition=u.position):Z(w)?(u.doctype+=w,u.state=E.DOCTYPE_DTD_QUOTED,u.q=w):u.doctype+=w;continue;case E.DOCTYPE_DTD_QUOTED:u.doctype+=w,w===u.q&&(u.state=E.DOCTYPE_DTD,u.q="");continue;case E.COMMENT:w==="-"?u.state=E.COMMENT_ENDING:u.comment+=w;continue;case E.COMMENT_ENDING:w==="-"?(u.state=E.COMMENT_ENDED,u.comment=I(u.opt,u.comment),u.comment&&M(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+w,u.state=E.COMMENT);continue;case E.COMMENT_ENDED:w!==">"?($(u,"Malformed comment"),u.comment+="--"+w,u.state=E.COMMENT):u.doctype&&u.doctype!==!0?u.state=E.DOCTYPE_DTD:u.state=E.TEXT;continue;case E.CDATA:w==="]"?u.state=E.CDATA_ENDING:u.cdata+=w;continue;case E.CDATA_ENDING:w==="]"?u.state=E.CDATA_ENDING_2:(u.cdata+="]"+w,u.state=E.CDATA);continue;case E.CDATA_ENDING_2:w===">"?(u.cdata&&M(u,"oncdata",u.cdata),M(u,"onclosecdata"),u.cdata="",u.state=E.TEXT):w==="]"?u.cdata+="]":(u.cdata+="]]"+w,u.state=E.CDATA);continue;case E.PROC_INST:w==="?"?u.state=E.PROC_INST_ENDING:x(w)?u.state=E.PROC_INST_BODY:u.procInstName+=w;continue;case E.PROC_INST_BODY:if(!u.procInstBody&&x(w))continue;w==="?"?u.state=E.PROC_INST_ENDING:u.procInstBody+=w;continue;case E.PROC_INST_ENDING:w===">"?(M(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=E.TEXT):(u.procInstBody+="?"+w,u.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:V(T,w)?u.tagName+=w:(N(u),w===">"?G(u):w==="/"?u.state=E.OPEN_TAG_SLASH:(x(w)||$(u,"Invalid character in tag name"),u.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:w===">"?(G(u,!0),H(u)):($(u,"Forward-slash in opening tag not followed by >"),u.state=E.ATTRIB);continue;case E.ATTRIB:if(x(w))continue;w===">"?G(u):w==="/"?u.state=E.OPEN_TAG_SLASH:V(A,w)?(u.attribName=w,u.attribValue="",u.state=E.ATTRIB_NAME):$(u,"Invalid attribute name");continue;case E.ATTRIB_NAME:w==="="?u.state=E.ATTRIB_VALUE:w===">"?($(u,"Attribute without value"),u.attribValue=u.attribName,k(u),G(u)):x(w)?u.state=E.ATTRIB_NAME_SAW_WHITE:V(T,w)?u.attribName+=w:$(u,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(w==="=")u.state=E.ATTRIB_VALUE;else{if(x(w))continue;$(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",M(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",w===">"?G(u):V(A,w)?(u.attribName=w,u.state=E.ATTRIB_NAME):($(u,"Invalid attribute name"),u.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(x(w))continue;Z(w)?(u.q=w,u.state=E.ATTRIB_VALUE_QUOTED):(u.opt.unquotedAttributeValues||b(u,"Unquoted attribute value"),u.state=E.ATTRIB_VALUE_UNQUOTED,u.attribValue=w);continue;case E.ATTRIB_VALUE_QUOTED:if(w!==u.q){w==="&"?u.state=E.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=w;continue}k(u),u.q="",u.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:x(w)?u.state=E.ATTRIB:w===">"?G(u):w==="/"?u.state=E.OPEN_TAG_SLASH:V(A,w)?($(u,"No whitespace between attributes"),u.attribName=w,u.attribValue="",u.state=E.ATTRIB_NAME):$(u,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!oe(w)){w==="&"?u.state=E.ATTRIB_VALUE_ENTITY_U:u.attribValue+=w;continue}k(u),w===">"?G(u):u.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(u.tagName)w===">"?H(u):V(T,w)?u.tagName+=w:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=E.SCRIPT):(x(w)||$(u,"Invalid tagname in closing tag"),u.state=E.CLOSE_TAG_SAW_WHITE);else{if(x(w))continue;Ne(A,w)?u.script?(u.script+="</"+w,u.state=E.SCRIPT):$(u,"Invalid tagname in closing tag."):u.tagName=w}continue;case E.CLOSE_TAG_SAW_WHITE:if(x(w))continue;w===">"?H(u):$(u,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var re,pe;switch(u.state){case E.TEXT_ENTITY:re=E.TEXT,pe="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:re=E.ATTRIB_VALUE_QUOTED,pe="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:re=E.ATTRIB_VALUE_UNQUOTED,pe="attribValue";break}if(w===";"){var ye=X(u);u.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(ye)?(u.entity="",u.state=re,u.write(ye)):(u[pe]+=ye,u.entity="",u.state=re)}else V(u.entity.length?D:S,w)?u.entity+=w:($(u,"Invalid character in entity name"),u[pe]+="&"+u.entity+w,u.entity="",u.state=re);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&i(u),u}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var d=String.fromCharCode,u=Math.floor,C=function(){var w=16384,Y=[],ee,re,pe=-1,ye=arguments.length;if(!ye)return"";for(var et="";++pe<ye;){var le=Number(arguments[pe]);if(!isFinite(le)||le<0||le>1114111||u(le)!==le)throw RangeError("Invalid code point: "+le);le<=65535?Y.push(le):(le-=65536,ee=(le>>10)+55296,re=le%1024+56320,Y.push(ee,re)),(pe+1===ye||Y.length>w)&&(et+=d.apply(null,Y),Y.length=0)}return et};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C}()})(e)})(nc);Object.defineProperty(Hn,"__esModule",{value:!0});Hn.XElement=void 0;Hn.parseXml=Ip;const $p=nc,ur=nn;class rc{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,ur.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Op(t))throw(0,ur.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const n=this.attributes===null?null:this.attributes[t];if(n==null)throw(0,ur.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return n}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,n=!1,r=null){const i=this.elementOrNull(t,n);if(i===null)throw(0,ur.newError)(r||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,n=!1){if(this.elements===null)return null;for(const r of this.elements)if(Fa(r,t,n))return r;return null}getElements(t,n=!1){return this.elements===null?[]:this.elements.filter(r=>Fa(r,t,n))}elementValueOrEmpty(t,n=!1){const r=this.elementOrNull(t,n);return r===null?"":r.value}}Hn.XElement=rc;const bp=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Op(e){return bp.test(e)}function Fa(e,t,n){const r=e.name;return r===t||n===!0&&r.length===t.length&&r.toLowerCase()===t.toLowerCase()}function Ip(e){let t=null;const n=$p.parser(!0,{}),r=[];return n.onopentag=i=>{const o=new rc(i.name);if(o.attributes=i.attributes,t===null)t=o;else{const a=r[r.length-1];a.elements==null&&(a.elements=[]),a.elements.push(o)}r.push(o)},n.onclosetag=()=>{r.pop()},n.ontext=i=>{r.length>0&&(r[r.length-1].value=i)},n.oncdata=i=>{const o=r[r.length-1];o.value=i,o.isCData=!0},n.onerror=i=>{throw i},n.write(e),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=f;var t=ft;Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});var n=nn;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return n.newError}});var r=Te;Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return r.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return r.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return r.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return r.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return r.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return r.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return r.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return r.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return r.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return r.safeStringifyJson}});var i=qr;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return i.MemoLazy}});var o=Bn;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return o.ProgressCallbackTransform}});var a=Gr;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return a.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return a.githubUrl}});var s=wo;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return s.retry}});var l=_o;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var m=Qt;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return m.UUID}});var c=Hn;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return c.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return c.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function f(h){return h==null?[]:Array.isArray(h)?h:[h]}})(he);var Ee={},Ao={},Be={};function ic(e){return typeof e>"u"||e===null}function Rp(e){return typeof e=="object"&&e!==null}function Pp(e){return Array.isArray(e)?e:ic(e)?[]:[e]}function Np(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function Dp(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function Fp(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Be.isNothing=ic;Be.isObject=Rp;Be.toArray=Pp;Be.repeat=Dp;Be.isNegativeZero=Fp;Be.extend=Np;function oc(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function bn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=oc(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}bn.prototype=Object.create(Error.prototype);bn.prototype.constructor=bn;bn.prototype.toString=function(t){return this.name+": "+oc(this,t)};var jn=bn,gn=Be;function Si(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(o=" ... ",t=r-s+o.length),n-r>s&&(a=" ...",n=r+s-a.length),{str:o+e.slice(t,n).replace(/\t/g,"→")+a,pos:r-t+o.length}}function Ti(e,t){return gn.repeat(" ",t-e.length)+e}function xp(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var s="",l,m,c=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)m=Si(e.buffer,r[a-l],i[a-l],e.position-(r[a]-r[a-l]),f),s=gn.repeat(" ",t.indent)+Ti((e.line-l+1).toString(),c)+" | "+m.str+`
`+s;for(m=Si(e.buffer,r[a],i[a],e.position,f),s+=gn.repeat(" ",t.indent)+Ti((e.line+1).toString(),c)+" | "+m.str+`
`,s+=gn.repeat("-",t.indent+c+3+m.pos)+`^
`,l=1;l<=t.linesAfter&&!(a+l>=i.length);l++)m=Si(e.buffer,r[a+l],i[a+l],e.position-(r[a]-r[a+l]),f),s+=gn.repeat(" ",t.indent)+Ti((e.line+l+1).toString(),c)+" | "+m.str+`
`;return s.replace(/\n$/,"")}var Lp=xp,xa=jn,Up=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],kp=["scalar","sequence","mapping"];function Mp(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function Bp(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Up.indexOf(n)===-1)throw new xa('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Mp(t.styleAliases||null),kp.indexOf(this.kind)===-1)throw new xa('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Oe=Bp,dn=jn,Ci=Oe;function La(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}function Hp(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function Ji(e){return this.extend(e)}Ji.prototype.extend=function(t){var n=[],r=[];if(t instanceof Ci)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new dn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Ci))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new dn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new dn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof Ci))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ji.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=La(i,"implicit"),i.compiledExplicit=La(i,"explicit"),i.compiledTypeMap=Hp(i.compiledImplicit,i.compiledExplicit),i};var ac=Ji,jp=Oe,sc=new jp("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),qp=Oe,lc=new qp("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Gp=Oe,cc=new Gp("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Wp=ac,uc=new Wp({explicit:[sc,lc,cc]}),Vp=Oe;function Yp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function zp(){return null}function Xp(e){return e===null}var fc=new Vp("tag:yaml.org,2002:null",{kind:"scalar",resolve:Yp,construct:zp,predicate:Xp,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Kp=Oe;function Jp(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Qp(e){return e==="true"||e==="True"||e==="TRUE"}function Zp(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var dc=new Kp("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Jp,construct:Qp,predicate:Zp,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),em=Be,tm=Oe;function nm(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function rm(e){return 48<=e&&e<=55}function im(e){return 48<=e&&e<=57}function om(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!nm(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!rm(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!im(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function am(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function sm(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!em.isNegativeZero(e)}var hc=new tm("tag:yaml.org,2002:int",{kind:"scalar",resolve:om,construct:am,predicate:sm,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),pc=Be,lm=Oe,cm=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function um(e){return!(e===null||!cm.test(e)||e[e.length-1]==="_")}function fm(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var dm=/^[-+]?[0-9]+e/;function hm(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(pc.isNegativeZero(e))return"-0.0";return n=e.toString(10),dm.test(n)?n.replace("e",".e"):n}function pm(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||pc.isNegativeZero(e))}var mc=new lm("tag:yaml.org,2002:float",{kind:"scalar",resolve:um,construct:fm,predicate:pm,represent:hm,defaultStyle:"lowercase"}),gc=uc.extend({implicit:[fc,dc,hc,mc]}),Ec=gc,mm=Oe,yc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),vc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function gm(e){return e===null?!1:yc.exec(e)!==null||vc.exec(e)!==null}function Em(e){var t,n,r,i,o,a,s,l=0,m=null,c,f,h;if(t=yc.exec(e),t===null&&(t=vc.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],f=+(t[11]||0),m=(c*60+f)*6e4,t[9]==="-"&&(m=-m)),h=new Date(Date.UTC(n,r,i,o,a,s,l)),m&&h.setTime(h.getTime()-m),h}function ym(e){return e.toISOString()}var wc=new mm("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:gm,construct:Em,instanceOf:Date,represent:ym}),vm=Oe;function wm(e){return e==="<<"||e===null}var _c=new vm("tag:yaml.org,2002:merge",{kind:"scalar",resolve:wm}),_m=Oe,So=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Am(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=So;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Sm(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=So,a=0,s=[];for(t=0;t<i;t++)t%4===0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):n===18?(s.push(a>>10&255),s.push(a>>2&255)):n===12&&s.push(a>>4&255),new Uint8Array(s)}function Tm(e){var t="",n=0,r,i,o=e.length,a=So;for(r=0;r<o;r++)r%3===0&&r&&(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]):i===2?(t+=a[n>>10&63],t+=a[n>>4&63],t+=a[n<<2&63],t+=a[64]):i===1&&(t+=a[n>>2&63],t+=a[n<<4&63],t+=a[64],t+=a[64]),t}function Cm(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Ac=new _m("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Am,construct:Sm,predicate:Cm,represent:Tm}),$m=Oe,bm=Object.prototype.hasOwnProperty,Om=Object.prototype.toString;function Im(e){if(e===null)return!0;var t=[],n,r,i,o,a,s=e;for(n=0,r=s.length;n<r;n+=1){if(i=s[n],a=!1,Om.call(i)!=="[object Object]")return!1;for(o in i)if(bm.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function Rm(e){return e!==null?e:[]}var Sc=new $m("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Im,construct:Rm}),Pm=Oe,Nm=Object.prototype.toString;function Dm(e){if(e===null)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],Nm.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function Fm(e){if(e===null)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var Tc=new Pm("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Dm,construct:Fm}),xm=Oe,Lm=Object.prototype.hasOwnProperty;function Um(e){if(e===null)return!0;var t,n=e;for(t in n)if(Lm.call(n,t)&&n[t]!==null)return!1;return!0}function km(e){return e!==null?e:{}}var Cc=new xm("tag:yaml.org,2002:set",{kind:"mapping",resolve:Um,construct:km}),To=Ec.extend({implicit:[wc,_c],explicit:[Ac,Sc,Tc,Cc]}),$t=Be,$c=jn,Mm=Lp,Bm=To,dt=Object.prototype.hasOwnProperty,Pr=1,bc=2,Oc=3,Nr=4,$i=1,Hm=2,Ua=3,jm=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qm=/[\x85\u2028\u2029]/,Gm=/[,\[\]\{\}]/,Ic=/^(?:!|!!|![a-z\-]+!)$/i,Rc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ka(e){return Object.prototype.toString.call(e)}function Ye(e){return e===10||e===13}function It(e){return e===9||e===32}function Pe(e){return e===9||e===32||e===10||e===13}function qt(e){return e===44||e===91||e===93||e===123||e===125}function Wm(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Vm(e){return e===120?2:e===117?4:e===85?8:0}function Ym(e){return 48<=e&&e<=57?e-48:-1}function Ma(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function zm(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Pc=new Array(256),Nc=new Array(256);for(var Lt=0;Lt<256;Lt++)Pc[Lt]=Ma(Lt)?1:0,Nc[Lt]=Ma(Lt);function Xm(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Bm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Dc(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Mm(n),new $c(t,n)}function L(e,t){throw Dc(e,t)}function Dr(e,t){e.onWarning&&e.onWarning.call(null,Dc(e,t))}var Ba={YAML:function(t,n,r){var i,o,a;t.version!==null&&L(t,"duplication of %YAML directive"),r.length!==1&&L(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&L(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&L(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&Dr(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&L(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],Ic.test(i)||L(t,"ill-formed tag handle (first argument) of the TAG directive"),dt.call(t.tagMap,i)&&L(t,'there is a previously declared suffix for "'+i+'" tag handle'),Rc.test(o)||L(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{L(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function ct(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)a=s.charCodeAt(i),a===9||32<=a&&a<=1114111||L(e,"expected valid JSON character");else jm.test(s)&&L(e,"the stream contains non-printable characters");e.result+=s}}function Ha(e,t,n,r){var i,o,a,s;for($t.isObject(n)||L(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,s=i.length;a<s;a+=1)o=i[a],dt.call(t,o)||(t[o]=n[o],r[o]=!0)}function Gt(e,t,n,r,i,o,a,s,l){var m,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,c=i.length;m<c;m+=1)Array.isArray(i[m])&&L(e,"nested arrays are not supported inside keys"),typeof i=="object"&&ka(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&ka(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,c=o.length;m<c;m+=1)Ha(e,t,o[m],n);else Ha(e,t,o,n);else!e.json&&!dt.call(n,i)&&dt.call(t,i)&&(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,L(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Co(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):L(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function se(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;It(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ye(i))for(Co(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&Dr(e,"deficient indentation"),r}function Wr(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Pe(n)))}function $o(e,t){t===1?e.result+=" ":t>1&&(e.result+=$t.repeat(`
`,t-1))}function Km(e,t,n){var r,i,o,a,s,l,m,c,f=e.kind,h=e.result,g;if(g=e.input.charCodeAt(e.position),Pe(g)||qt(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),Pe(i)||n&&qt(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),Pe(i)||n&&qt(i))break}else if(g===35){if(r=e.input.charCodeAt(e.position-1),Pe(r))break}else{if(e.position===e.lineStart&&Wr(e)||n&&qt(g))break;if(Ye(g))if(l=e.line,m=e.lineStart,c=e.lineIndent,se(e,!1,-1),e.lineIndent>=t){s=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=m,e.lineIndent=c;break}}s&&(ct(e,o,a,!1),$o(e,e.line-l),o=a=e.position,s=!1),It(g)||(a=e.position+1),g=e.input.charCodeAt(++e.position)}return ct(e,o,a,!1),e.result?!0:(e.kind=f,e.result=h,!1)}function Jm(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(ct(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Ye(n)?(ct(e,r,i,!0),$o(e,se(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Wr(e)?L(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);L(e,"unexpected end of the stream within a single quoted scalar")}function Qm(e,t){var n,r,i,o,a,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return ct(e,n,e.position,!0),e.position++,!0;if(s===92){if(ct(e,n,e.position,!0),s=e.input.charCodeAt(++e.position),Ye(s))se(e,!1,t);else if(s<256&&Pc[s])e.result+=Nc[s],e.position++;else if((a=Vm(s))>0){for(i=a,o=0;i>0;i--)s=e.input.charCodeAt(++e.position),(a=Wm(s))>=0?o=(o<<4)+a:L(e,"expected hexadecimal character");e.result+=zm(o),e.position++}else L(e,"unknown escape sequence");n=r=e.position}else Ye(s)?(ct(e,n,r,!0),$o(e,se(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Wr(e)?L(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}L(e,"unexpected end of the stream within a double quoted scalar")}function Zm(e,t){var n=!0,r,i,o,a=e.tag,s,l=e.anchor,m,c,f,h,g,_=Object.create(null),y,A,T,S;if(S=e.input.charCodeAt(e.position),S===91)c=93,g=!1,s=[];else if(S===123)c=125,g=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),S=e.input.charCodeAt(++e.position);S!==0;){if(se(e,!0,t),S=e.input.charCodeAt(e.position),S===c)return e.position++,e.tag=a,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=s,!0;n?S===44&&L(e,"expected the node content, but found ','"):L(e,"missed comma between flow collection entries"),A=y=T=null,f=h=!1,S===63&&(m=e.input.charCodeAt(e.position+1),Pe(m)&&(f=h=!0,e.position++,se(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,Zt(e,t,Pr,!1,!0),A=e.tag,y=e.result,se(e,!0,t),S=e.input.charCodeAt(e.position),(h||e.line===r)&&S===58&&(f=!0,S=e.input.charCodeAt(++e.position),se(e,!0,t),Zt(e,t,Pr,!1,!0),T=e.result),g?Gt(e,s,_,A,y,T,r,i,o):f?s.push(Gt(e,null,_,A,y,T,r,i,o)):s.push(y),se(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(n=!0,S=e.input.charCodeAt(++e.position)):n=!1}L(e,"unexpected end of the stream within a flow collection")}function eg(e,t){var n,r,i=$i,o=!1,a=!1,s=t,l=0,m=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)$i===i?i=f===43?Ua:Hm:L(e,"repeat of a chomping mode identifier");else if((c=Ym(f))>=0)c===0?L(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?L(e,"repeat of an indentation width identifier"):(s=t+c-1,a=!0);else break;if(It(f)){do f=e.input.charCodeAt(++e.position);while(It(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ye(f)&&f!==0)}for(;f!==0;){for(Co(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),Ye(f)){l++;continue}if(e.lineIndent<s){i===Ua?e.result+=$t.repeat(`
`,o?1+l:l):i===$i&&o&&(e.result+=`
`);break}for(r?It(f)?(m=!0,e.result+=$t.repeat(`
`,o?1+l:l)):m?(m=!1,e.result+=$t.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=$t.repeat(`
`,l):e.result+=$t.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,n=e.position;!Ye(f)&&f!==0;)f=e.input.charCodeAt(++e.position);ct(e,n,e.position,!1)}return!0}function ja(e,t){var n,r=e.tag,i=e.anchor,o=[],a,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),!(l!==45||(a=e.input.charCodeAt(e.position+1),!Pe(a))));){if(s=!0,e.position++,se(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Zt(e,t,Oc,!1,!0),o.push(e.result),se(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)L(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function tg(e,t,n){var r,i,o,a,s,l,m=e.tag,c=e.anchor,f={},h=Object.create(null),g=null,_=null,y=null,A=!1,T=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),S=e.input.charCodeAt(e.position);S!==0;){if(!A&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(S===63||S===58)&&Pe(r))S===63?(A&&(Gt(e,f,h,g,_,null,a,s,l),g=_=y=null),T=!0,A=!0,i=!0):A?(A=!1,i=!0):L(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=r;else{if(a=e.line,s=e.lineStart,l=e.position,!Zt(e,n,bc,!1,!0))break;if(e.line===o){for(S=e.input.charCodeAt(e.position);It(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),Pe(S)||L(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Gt(e,f,h,g,_,null,a,s,l),g=_=y=null),T=!0,A=!1,i=!1,g=e.tag,_=e.result;else if(T)L(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=m,e.anchor=c,!0}else if(T)L(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=m,e.anchor=c,!0}if((e.line===o||e.lineIndent>t)&&(A&&(a=e.line,s=e.lineStart,l=e.position),Zt(e,t,Nr,!0,i)&&(A?_=e.result:y=e.result),A||(Gt(e,f,h,g,_,y,a,s,l),g=_=y=null),se(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&S!==0)L(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return A&&Gt(e,f,h,g,_,null,a,s,l),T&&(e.tag=m,e.anchor=c,e.kind="mapping",e.result=f),T}function ng(e){var t,n=!1,r=!1,i,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&L(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(n=!0,a=e.input.charCodeAt(++e.position)):a===33?(r=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):L(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Pe(a);)a===33&&(r?L(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Ic.test(i)||L(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),Gm.test(o)&&L(e,"tag suffix cannot contain flow indicator characters")}o&&!Rc.test(o)&&L(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{L(e,"tag name is malformed: "+o)}return n?e.tag=o:dt.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:L(e,'undeclared tag handle "'+i+'"'),!0}function rg(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&L(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Pe(n)&&!qt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ig(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Pe(r)&&!qt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),dt.call(e.anchorMap,n)||L(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],se(e,!0,-1),!0}function Zt(e,t,n,r,i){var o,a,s,l=1,m=!1,c=!1,f,h,g,_,y,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=Nr===n||Oc===n,r&&se(e,!0,-1)&&(m=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;ng(e)||rg(e);)se(e,!0,-1)?(m=!0,s=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=m||i),(l===1||Nr===n)&&(Pr===n||bc===n?y=t:y=t+1,A=e.position-e.lineStart,l===1?s&&(ja(e,A)||tg(e,A,y))||Zm(e,y)?c=!0:(a&&eg(e,y)||Jm(e,y)||Qm(e,y)?c=!0:ig(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&L(e,"alias node should not have any properties")):Km(e,y,Pr===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=s&&ja(e,A))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&L(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if(_=e.implicitTypes[f],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(dt.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,h=g.length;f<h;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){_=g[f];break}_||L(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&L(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):L(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function og(e){var t=e.position,n,r,i,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(se(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),n=e.position;a!==0&&!Pe(a);)a=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&L(e,"directive name must not be less than one character in length");a!==0;){for(;It(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Ye(a));break}if(Ye(a))break;for(n=e.position;a!==0&&!Pe(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}a!==0&&Co(e),dt.call(Ba,r)?Ba[r](e,r,i):Dr(e,'unknown document directive "'+r+'"')}if(se(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,se(e,!0,-1)):o&&L(e,"directives end mark is expected"),Zt(e,e.lineIndent-1,Nr,!1,!0),se(e,!0,-1),e.checkLineBreaks&&qm.test(e.input.slice(t,e.position))&&Dr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Wr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,se(e,!0,-1));return}if(e.position<e.length-1)L(e,"end of the stream or a document separator is expected");else return}function Fc(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Xm(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,L(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)og(n);return n.documents}function ag(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=Fc(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function sg(e,t){var n=Fc(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new $c("expected a single document in the stream, but found more")}}Ao.loadAll=ag;Ao.load=sg;var xc={},Vr=Be,qn=jn,lg=To,Lc=Object.prototype.toString,Uc=Object.prototype.hasOwnProperty,bo=65279,cg=9,On=10,ug=13,fg=32,dg=33,hg=34,Qi=35,pg=37,mg=38,gg=39,Eg=42,kc=44,yg=45,Fr=58,vg=61,wg=62,_g=63,Ag=64,Mc=91,Bc=93,Sg=96,Hc=123,Tg=124,jc=125,_e={};_e[0]="\\0";_e[7]="\\a";_e[8]="\\b";_e[9]="\\t";_e[10]="\\n";_e[11]="\\v";_e[12]="\\f";_e[13]="\\r";_e[27]="\\e";_e[34]='\\"';_e[92]="\\\\";_e[133]="\\N";_e[160]="\\_";_e[8232]="\\L";_e[8233]="\\P";var Cg=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],$g=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function bg(e,t){var n,r,i,o,a,s,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)a=r[i],s=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&Uc.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}function Og(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new qn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Vr.repeat("0",r-t.length)+t}var Ig=1,In=2;function Rg(e){this.schema=e.schema||lg,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Vr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=bg(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?In:Ig,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function qa(e,t){for(var n=Vr.repeat(" ",t),r=0,i=-1,o="",a,s=e.length;r<s;)i=e.indexOf(`
`,r),i===-1?(a=e.slice(r),r=s):(a=e.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}function Zi(e,t){return`
`+Vr.repeat(" ",e.indent*t)}function Pg(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function xr(e){return e===fg||e===cg}function Rn(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==bo||65536<=e&&e<=1114111}function Ga(e){return Rn(e)&&e!==bo&&e!==ug&&e!==On}function Wa(e,t,n){var r=Ga(e),i=r&&!xr(e);return(n?r:r&&e!==kc&&e!==Mc&&e!==Bc&&e!==Hc&&e!==jc)&&e!==Qi&&!(t===Fr&&!i)||Ga(t)&&!xr(t)&&e===Qi||t===Fr&&i}function Ng(e){return Rn(e)&&e!==bo&&!xr(e)&&e!==yg&&e!==_g&&e!==Fr&&e!==kc&&e!==Mc&&e!==Bc&&e!==Hc&&e!==jc&&e!==Qi&&e!==mg&&e!==Eg&&e!==dg&&e!==Tg&&e!==vg&&e!==wg&&e!==gg&&e!==hg&&e!==pg&&e!==Ag&&e!==Sg}function Dg(e){return!xr(e)&&e!==Fr}function En(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function qc(e){var t=/^\n* /;return t.test(e)}var Gc=1,eo=2,Wc=3,Vc=4,jt=5;function Fg(e,t,n,r,i,o,a,s){var l,m=0,c=null,f=!1,h=!1,g=r!==-1,_=-1,y=Ng(En(e,0))&&Dg(En(e,e.length-1));if(t||a)for(l=0;l<e.length;m>=65536?l+=2:l++){if(m=En(e,l),!Rn(m))return jt;y=y&&Wa(m,c,s),c=m}else{for(l=0;l<e.length;m>=65536?l+=2:l++){if(m=En(e,l),m===On)f=!0,g&&(h=h||l-_-1>r&&e[_+1]!==" ",_=l);else if(!Rn(m))return jt;y=y&&Wa(m,c,s),c=m}h=h||g&&l-_-1>r&&e[_+1]!==" "}return!f&&!h?y&&!a&&!i(e)?Gc:o===In?jt:eo:n>9&&qc(e)?jt:a?o===In?jt:eo:h?Vc:Wc}function xg(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===In?'""':"''";if(!e.noCompatMode&&(Cg.indexOf(t)!==-1||$g.test(t)))return e.quotingType===In?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;function l(m){return Pg(e,m)}switch(Fg(t,s,e.indent,a,l,e.quotingType,e.forceQuotes&&!r,i)){case Gc:return t;case eo:return"'"+t.replace(/'/g,"''")+"'";case Wc:return"|"+Va(t,e.indent)+Ya(qa(t,o));case Vc:return">"+Va(t,e.indent)+Ya(qa(Lg(t,a),o));case jt:return'"'+Ug(t)+'"';default:throw new qn("impossible error: invalid scalar style")}}()}function Va(e,t){var n=qc(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function Ya(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Lg(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var m=e.indexOf(`
`);return m=m!==-1?m:e.length,n.lastIndex=m,za(e.slice(0,m),t)}(),i=e[0]===`
`||e[0]===" ",o,a;a=n.exec(e);){var s=a[1],l=a[2];o=l[0]===" ",r+=s+(!i&&!o&&l!==""?`
`:"")+za(l,t),i=o}return r}function za(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,a=0,s=0,l="";r=n.exec(e);)s=r.index,s-i>t&&(o=a>i?a:s,l+=`
`+e.slice(i,o),i=o+1),a=s;return l+=`
`,e.length-i>t&&a>i?l+=e.slice(i,a)+`
`+e.slice(a+1):l+=e.slice(i),l.slice(1)}function Ug(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=En(e,i),r=_e[n],!r&&Rn(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Og(n);return t}function kg(e,t,n){var r="",i=e.tag,o,a,s;for(o=0,a=n.length;o<a;o+=1)s=n[o],e.replacer&&(s=e.replacer.call(n,String(o),s)),(Qe(e,t,s,!1,!1)||typeof s>"u"&&Qe(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function Xa(e,t,n,r){var i="",o=e.tag,a,s,l;for(a=0,s=n.length;a<s;a+=1)l=n[a],e.replacer&&(l=e.replacer.call(n,String(a),l)),(Qe(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Qe(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Zi(e,t)),e.dump&&On===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Mg(e,t,n){var r="",i=e.tag,o=Object.keys(n),a,s,l,m,c;for(a=0,s=o.length;a<s;a+=1)c="",r!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=o[a],m=n[l],e.replacer&&(m=e.replacer.call(n,l,m)),Qe(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Qe(e,t,m,!1,!1)&&(c+=e.dump,r+=c));e.tag=i,e.dump="{"+r+"}"}function Bg(e,t,n,r){var i="",o=e.tag,a=Object.keys(n),s,l,m,c,f,h;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new qn("sortKeys must be a boolean or a function");for(s=0,l=a.length;s<l;s+=1)h="",(!r||i!=="")&&(h+=Zi(e,t)),m=a[s],c=n[m],e.replacer&&(c=e.replacer.call(n,m,c)),Qe(e,t+1,m,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&On===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,f&&(h+=Zi(e,t)),Qe(e,t+1,c,!0,f)&&(e.dump&&On===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=o,e.dump=i||"{}"}function Ka(e,t,n){var r,i,o,a,s,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,a=i.length;o<a;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,Lc.call(s.represent)==="[object Function]")r=s.represent(t,l);else if(Uc.call(s.represent,l))r=s.represent[l](t,l);else throw new qn("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function Qe(e,t,n,r,i,o,a){e.tag=null,e.dump=n,Ka(e,n,!1)||Ka(e,n,!0);var s=Lc.call(e.dump),l=r,m;r&&(r=e.flowLevel<0||e.flowLevel>t);var c=s==="[object Object]"||s==="[object Array]",f,h;if(c&&(f=e.duplicates.indexOf(n),h=f!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&h&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),s==="[object Object]")r&&Object.keys(e.dump).length!==0?(Bg(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(Mg(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?Xa(e,t-1,e.dump,i):Xa(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(kg(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&xg(e,e.dump,t,o,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new qn("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(m=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",e.dump=m+" "+e.dump)}return!0}function Hg(e,t){var n=[],r=[],i,o;for(to(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function to(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)to(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)to(e[r[i]],t,n)}function jg(e,t){t=t||{};var n=new Rg(t);n.noRefs||Hg(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Qe(n,0,r,!0,!0)?n.dump+`
`:""}xc.dump=jg;var Yc=Ao,qg=xc;function Oo(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}Ee.Type=Oe;Ee.Schema=ac;Ee.FAILSAFE_SCHEMA=uc;Ee.JSON_SCHEMA=gc;Ee.CORE_SCHEMA=Ec;Ee.DEFAULT_SCHEMA=To;Ee.load=Yc.load;Ee.loadAll=Yc.loadAll;Ee.dump=qg.dump;Ee.YAMLException=jn;Ee.types={binary:Ac,float:mc,map:cc,null:fc,pairs:Tc,set:Cc,timestamp:wc,bool:dc,int:hc,merge:_c,omap:Sc,seq:lc,str:sc};Ee.safeLoad=Oo("safeLoad","load");Ee.safeLoadAll=Oo("safeLoadAll","loadAll");Ee.safeDump=Oo("safeDump","dump");var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Lazy=void 0;class Gg{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}Yr.Lazy=Gg;var no={exports:{}};const Wg="2.0.0",zc=256,Vg=Number.MAX_SAFE_INTEGER||9007199254740991,Yg=16,zg=zc-6,Xg=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var zr={MAX_LENGTH:zc,MAX_SAFE_COMPONENT_LENGTH:Yg,MAX_SAFE_BUILD_LENGTH:zg,MAX_SAFE_INTEGER:Vg,RELEASE_TYPES:Xg,SEMVER_SPEC_VERSION:Wg,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Kg=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Xr=Kg;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=zr,o=Xr;t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],m=t.safeSrc=[],c=t.t={};let f=0;const h="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[h,r]],_=A=>{for(const[T,S]of g)A=A.split(`${T}*`).join(`${T}{0,${S}}`).split(`${T}+`).join(`${T}{1,${S}}`);return A},y=(A,T,S)=>{const D=_(T),x=f++;o(A,x,T),c[A]=x,l[x]=T,m[x]=D,a[x]=new RegExp(T,S?"g":void 0),s[x]=new RegExp(D,S?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),y("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${h}+`),y("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),y("FULL",`^${l[c.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),y("LOOSE",`^${l[c.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),y("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[c.COERCE],!0),y("COERCERTLFULL",l[c.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(no,no.exports);var Gn=no.exports;const Jg=Object.freeze({loose:!0}),Qg=Object.freeze({}),Zg=e=>e?typeof e!="object"?Jg:e:Qg;var Io=Zg;const Ja=/^[0-9]+$/,Xc=(e,t)=>{const n=Ja.test(e),r=Ja.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},e0=(e,t)=>Xc(t,e);var Kc={compareIdentifiers:Xc,rcompareIdentifiers:e0};const fr=Xr,{MAX_LENGTH:Qa,MAX_SAFE_INTEGER:dr}=zr,{safeRe:hr,t:pr}=Gn,t0=Io,{compareIdentifiers:Ut}=Kc;let n0=class We{constructor(t,n){if(n=t0(n),t instanceof We){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Qa)throw new TypeError(`version is longer than ${Qa} characters`);fr("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?hr[pr.LOOSE]:hr[pr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>dr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>dr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>dr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<dr)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fr("SemVer.compare",this.version,this.options,t),!(t instanceof We)){if(typeof t=="string"&&t===this.version)return 0;t=new We(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof We||(t=new We(t,this.options)),Ut(this.major,t.major)||Ut(this.minor,t.minor)||Ut(this.patch,t.patch)}comparePre(t){if(t instanceof We||(t=new We(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(fr("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ut(r,i)}while(++n)}compareBuild(t){t instanceof We||(t=new We(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(fr("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ut(r,i)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const i=`-${n}`.match(this.options.loose?hr[pr.PRERELEASELOOSE]:hr[pr.PRERELEASE]);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Ut(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ie=n0;const Za=Ie,r0=(e,t,n=!1)=>{if(e instanceof Za)return e;try{return new Za(e,t)}catch(r){if(!n)return null;throw r}};var rn=r0;const i0=rn,o0=(e,t)=>{const n=i0(e,t);return n?n.version:null};var a0=o0;const s0=rn,l0=(e,t)=>{const n=s0(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var c0=l0;const es=Ie,u0=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new es(e instanceof es?e.version:e,n).inc(t,r,i).version}catch{return null}};var f0=u0;const ts=rn,d0=(e,t)=>{const n=ts(e,null,!0),r=ts(t,null,!0),i=n.compare(r);if(i===0)return null;const o=i>0,a=o?n:r,s=o?r:n,l=!!a.prerelease.length;if(!!s.prerelease.length&&!l){if(!s.patch&&!s.minor)return"major";if(s.compareMain(a)===0)return s.minor&&!s.patch?"minor":"patch"}const c=l?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var h0=d0;const p0=Ie,m0=(e,t)=>new p0(e,t).major;var g0=m0;const E0=Ie,y0=(e,t)=>new E0(e,t).minor;var v0=y0;const w0=Ie,_0=(e,t)=>new w0(e,t).patch;var A0=_0;const S0=rn,T0=(e,t)=>{const n=S0(e,t);return n&&n.prerelease.length?n.prerelease:null};var C0=T0;const ns=Ie,$0=(e,t,n)=>new ns(e,n).compare(new ns(t,n));var He=$0;const b0=He,O0=(e,t,n)=>b0(t,e,n);var I0=O0;const R0=He,P0=(e,t)=>R0(e,t,!0);var N0=P0;const rs=Ie,D0=(e,t,n)=>{const r=new rs(e,n),i=new rs(t,n);return r.compare(i)||r.compareBuild(i)};var Ro=D0;const F0=Ro,x0=(e,t)=>e.sort((n,r)=>F0(n,r,t));var L0=x0;const U0=Ro,k0=(e,t)=>e.sort((n,r)=>U0(r,n,t));var M0=k0;const B0=He,H0=(e,t,n)=>B0(e,t,n)>0;var Kr=H0;const j0=He,q0=(e,t,n)=>j0(e,t,n)<0;var Po=q0;const G0=He,W0=(e,t,n)=>G0(e,t,n)===0;var Jc=W0;const V0=He,Y0=(e,t,n)=>V0(e,t,n)!==0;var Qc=Y0;const z0=He,X0=(e,t,n)=>z0(e,t,n)>=0;var No=X0;const K0=He,J0=(e,t,n)=>K0(e,t,n)<=0;var Do=J0;const Q0=Jc,Z0=Qc,eE=Kr,tE=No,nE=Po,rE=Do,iE=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Q0(e,n,r);case"!=":return Z0(e,n,r);case">":return eE(e,n,r);case">=":return tE(e,n,r);case"<":return nE(e,n,r);case"<=":return rE(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Zc=iE;const oE=Ie,aE=rn,{safeRe:mr,t:gr}=Gn,sE=(e,t)=>{if(e instanceof oE)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?mr[gr.COERCEFULL]:mr[gr.COERCE]);else{const l=t.includePrerelease?mr[gr.COERCERTLFULL]:mr[gr.COERCERTL];let m;for(;(m=l.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||m.index+m[0].length!==n.index+n[0].length)&&(n=m),l.lastIndex=m.index+m[1].length+m[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",o=n[4]||"0",a=t.includePrerelease&&n[5]?`-${n[5]}`:"",s=t.includePrerelease&&n[6]?`+${n[6]}`:"";return aE(`${r}.${i}.${o}${a}${s}`,t)};var lE=sE;class cE{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var uE=cE,bi,is;function je(){if(is)return bi;is=1;const e=/\s+/g;class t{constructor(b,P){if(P=i(P),b instanceof t)return b.loose===!!P.loose&&b.includePrerelease===!!P.includePrerelease?b:new t(b.raw,P);if(b instanceof o)return this.raw=b.value,this.set=[[b]],this.formatted=void 0,this;if(this.options=P,this.loose=!!P.loose,this.includePrerelease=!!P.includePrerelease,this.raw=b.trim().replace(e," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(N=>!y(N[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&A(N[0])){this.set=[N];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let b=0;b<this.set.length;b++){b>0&&(this.formatted+="||");const P=this.set[b];for(let $=0;$<P.length;$++)$>0&&(this.formatted+=" "),this.formatted+=P[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(b){const $=((this.options.includePrerelease&&g)|(this.options.loose&&_))+":"+b,N=r.get($);if(N)return N;const R=this.options.loose,k=R?l[m.HYPHENRANGELOOSE]:l[m.HYPHENRANGE];b=b.replace(k,M(this.options.includePrerelease)),a("hyphen replace",b),b=b.replace(l[m.COMPARATORTRIM],c),a("comparator trim",b),b=b.replace(l[m.TILDETRIM],f),a("tilde trim",b),b=b.replace(l[m.CARETTRIM],h),a("caret trim",b);let G=b.split(" ").map(U=>S(U,this.options)).join(" ").split(/\s+/).map(U=>B(U,this.options));R&&(G=G.filter(U=>(a("loose invalid filter",U,this.options),!!U.match(l[m.COMPARATORLOOSE])))),a("range list",G);const H=new Map,X=G.map(U=>new o(U,this.options));for(const U of X){if(y(U))return[U];H.set(U.value,U)}H.size>1&&H.has("")&&H.delete("");const ue=[...H.values()];return r.set($,ue),ue}intersects(b,P){if(!(b instanceof t))throw new TypeError("a Range is required");return this.set.some($=>T($,P)&&b.set.some(N=>T(N,P)&&$.every(R=>N.every(k=>R.intersects(k,P)))))}test(b){if(!b)return!1;if(typeof b=="string")try{b=new s(b,this.options)}catch{return!1}for(let P=0;P<this.set.length;P++)if(z(this.set[P],b,this.options))return!0;return!1}}bi=t;const n=uE,r=new n,i=Io,o=Jr(),a=Xr,s=Ie,{safeRe:l,t:m,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:h}=Gn,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:_}=zr,y=I=>I.value==="<0.0.0-0",A=I=>I.value==="",T=(I,b)=>{let P=!0;const $=I.slice();let N=$.pop();for(;P&&$.length;)P=$.every(R=>N.intersects(R,b)),N=$.pop();return P},S=(I,b)=>(a("comp",I,b),I=oe(I,b),a("caret",I),I=x(I,b),a("tildes",I),I=Ne(I,b),a("xrange",I),I=q(I,b),a("stars",I),I),D=I=>!I||I.toLowerCase()==="x"||I==="*",x=(I,b)=>I.trim().split(/\s+/).map(P=>Z(P,b)).join(" "),Z=(I,b)=>{const P=b.loose?l[m.TILDELOOSE]:l[m.TILDE];return I.replace(P,($,N,R,k,G)=>{a("tilde",I,$,N,R,k,G);let H;return D(N)?H="":D(R)?H=`>=${N}.0.0 <${+N+1}.0.0-0`:D(k)?H=`>=${N}.${R}.0 <${N}.${+R+1}.0-0`:G?(a("replaceTilde pr",G),H=`>=${N}.${R}.${k}-${G} <${N}.${+R+1}.0-0`):H=`>=${N}.${R}.${k} <${N}.${+R+1}.0-0`,a("tilde return",H),H})},oe=(I,b)=>I.trim().split(/\s+/).map(P=>V(P,b)).join(" "),V=(I,b)=>{a("caret",I,b);const P=b.loose?l[m.CARETLOOSE]:l[m.CARET],$=b.includePrerelease?"-0":"";return I.replace(P,(N,R,k,G,H)=>{a("caret",I,N,R,k,G,H);let X;return D(R)?X="":D(k)?X=`>=${R}.0.0${$} <${+R+1}.0.0-0`:D(G)?R==="0"?X=`>=${R}.${k}.0${$} <${R}.${+k+1}.0-0`:X=`>=${R}.${k}.0${$} <${+R+1}.0.0-0`:H?(a("replaceCaret pr",H),R==="0"?k==="0"?X=`>=${R}.${k}.${G}-${H} <${R}.${k}.${+G+1}-0`:X=`>=${R}.${k}.${G}-${H} <${R}.${+k+1}.0-0`:X=`>=${R}.${k}.${G}-${H} <${+R+1}.0.0-0`):(a("no pr"),R==="0"?k==="0"?X=`>=${R}.${k}.${G}${$} <${R}.${k}.${+G+1}-0`:X=`>=${R}.${k}.${G}${$} <${R}.${+k+1}.0-0`:X=`>=${R}.${k}.${G} <${+R+1}.0.0-0`),a("caret return",X),X})},Ne=(I,b)=>(a("replaceXRanges",I,b),I.split(/\s+/).map(P=>E(P,b)).join(" ")),E=(I,b)=>{I=I.trim();const P=b.loose?l[m.XRANGELOOSE]:l[m.XRANGE];return I.replace(P,($,N,R,k,G,H)=>{a("xRange",I,$,N,R,k,G,H);const X=D(R),ue=X||D(k),U=ue||D(G),qe=U;return N==="="&&qe&&(N=""),H=b.includePrerelease?"-0":"",X?N===">"||N==="<"?$="<0.0.0-0":$="*":N&&qe?(ue&&(k=0),G=0,N===">"?(N=">=",ue?(R=+R+1,k=0,G=0):(k=+k+1,G=0)):N==="<="&&(N="<",ue?R=+R+1:k=+k+1),N==="<"&&(H="-0"),$=`${N+R}.${k}.${G}${H}`):ue?$=`>=${R}.0.0${H} <${+R+1}.0.0-0`:U&&($=`>=${R}.${k}.0${H} <${R}.${+k+1}.0-0`),a("xRange return",$),$})},q=(I,b)=>(a("replaceStars",I,b),I.trim().replace(l[m.STAR],"")),B=(I,b)=>(a("replaceGTE0",I,b),I.trim().replace(l[b.includePrerelease?m.GTE0PRE:m.GTE0],"")),M=I=>(b,P,$,N,R,k,G,H,X,ue,U,qe)=>(D($)?P="":D(N)?P=`>=${$}.0.0${I?"-0":""}`:D(R)?P=`>=${$}.${N}.0${I?"-0":""}`:k?P=`>=${P}`:P=`>=${P}${I?"-0":""}`,D(X)?H="":D(ue)?H=`<${+X+1}.0.0-0`:D(U)?H=`<${X}.${+ue+1}.0-0`:qe?H=`<=${X}.${ue}.${U}-${qe}`:I?H=`<${X}.${ue}.${+U+1}-0`:H=`<=${H}`,`${P} ${H}`.trim()),z=(I,b,P)=>{for(let $=0;$<I.length;$++)if(!I[$].test(b))return!1;if(b.prerelease.length&&!P.includePrerelease){for(let $=0;$<I.length;$++)if(a(I[$].semver),I[$].semver!==o.ANY&&I[$].semver.prerelease.length>0){const N=I[$].semver;if(N.major===b.major&&N.minor===b.minor&&N.patch===b.patch)return!0}return!1}return!0};return bi}var Oi,os;function Jr(){if(os)return Oi;os=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],h=c.match(f);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new s(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Oi=t;const n=Io,{safeRe:r,t:i}=Gn,o=Zc,a=Xr,s=Ie,l=je();return Oi}const fE=je(),dE=(e,t,n)=>{try{t=new fE(t,n)}catch{return!1}return t.test(e)};var Qr=dE;const hE=je(),pE=(e,t)=>new hE(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var mE=pE;const gE=Ie,EE=je(),yE=(e,t,n)=>{let r=null,i=null,o=null;try{o=new EE(t,n)}catch{return null}return e.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new gE(r,n))}),r};var vE=yE;const wE=Ie,_E=je(),AE=(e,t,n)=>{let r=null,i=null,o=null;try{o=new _E(t,n)}catch{return null}return e.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new wE(r,n))}),r};var SE=AE;const Ii=Ie,TE=je(),as=Kr,CE=(e,t)=>{e=new TE(e,t);let n=new Ii("0.0.0");if(e.test(n)||(n=new Ii("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let o=null;i.forEach(a=>{const s=new Ii(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!o||as(s,o))&&(o=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||as(n,o))&&(n=o)}return n&&e.test(n)?n:null};var $E=CE;const bE=je(),OE=(e,t)=>{try{return new bE(e,t).range||"*"}catch{return null}};var IE=OE;const RE=Ie,eu=Jr(),{ANY:PE}=eu,NE=je(),DE=Qr,ss=Kr,ls=Po,FE=Do,xE=No,LE=(e,t,n,r)=>{e=new RE(e,r),t=new NE(t,r);let i,o,a,s,l;switch(n){case">":i=ss,o=FE,a=ls,s=">",l=">=";break;case"<":i=ls,o=xE,a=ss,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(DE(e,t,r))return!1;for(let m=0;m<t.set.length;++m){const c=t.set[m];let f=null,h=null;if(c.forEach(g=>{g.semver===PE&&(g=new eu(">=0.0.0")),f=f||g,h=h||g,i(g.semver,f.semver,r)?f=g:a(g.semver,h.semver,r)&&(h=g)}),f.operator===s||f.operator===l||(!h.operator||h.operator===s)&&o(e,h.semver))return!1;if(h.operator===l&&a(e,h.semver))return!1}return!0};var Fo=LE;const UE=Fo,kE=(e,t,n)=>UE(e,t,">",n);var ME=kE;const BE=Fo,HE=(e,t,n)=>BE(e,t,"<",n);var jE=HE;const cs=je(),qE=(e,t,n)=>(e=new cs(e,n),t=new cs(t,n),e.intersects(t,n));var GE=qE;const WE=Qr,VE=He;var YE=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort((c,f)=>VE(c,f,n));for(const c of a)WE(c,t,n)?(o=c,i||(i=c)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);const s=[];for(const[c,f]of r)c===f?s.push(c):!f&&c===a[0]?s.push("*"):f?c===a[0]?s.push(`<=${f}`):s.push(`${c} - ${f}`):s.push(`>=${c}`);const l=s.join(" || "),m=typeof t.raw=="string"?t.raw:String(t);return l.length<m.length?l:t};const us=je(),xo=Jr(),{ANY:Ri}=xo,hn=Qr,Lo=He,zE=(e,t,n={})=>{if(e===t)return!0;e=new us(e,n),t=new us(t,n);let r=!1;e:for(const i of e.set){for(const o of t.set){const a=KE(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},XE=[new xo(">=0.0.0-0")],fs=[new xo(">=0.0.0")],KE=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ri){if(t.length===1&&t[0].semver===Ri)return!0;n.includePrerelease?e=XE:e=fs}if(t.length===1&&t[0].semver===Ri){if(n.includePrerelease)return!0;t=fs}const r=new Set;let i,o;for(const g of e)g.operator===">"||g.operator===">="?i=ds(i,g,n):g.operator==="<"||g.operator==="<="?o=hs(o,g,n):r.add(g.semver);if(r.size>1)return null;let a;if(i&&o){if(a=Lo(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const g of r){if(i&&!hn(g,String(i),n)||o&&!hn(g,String(o),n))return null;for(const _ of t)if(!hn(g,String(_),n))return!1;return!0}let s,l,m,c,f=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const g of t){if(c=c||g.operator===">"||g.operator===">=",m=m||g.operator==="<"||g.operator==="<=",i){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator===">"||g.operator===">="){if(s=ds(i,g,n),s===g&&s!==i)return!1}else if(i.operator===">="&&!hn(i.semver,String(g),n))return!1}if(o){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator==="<"||g.operator==="<="){if(l=hs(o,g,n),l===g&&l!==o)return!1}else if(o.operator==="<="&&!hn(o.semver,String(g),n))return!1}if(!g.operator&&(o||i)&&a!==0)return!1}return!(i&&m&&!o&&a!==0||o&&c&&!i&&a!==0||h||f)},ds=(e,t,n)=>{if(!e)return t;const r=Lo(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},hs=(e,t,n)=>{if(!e)return t;const r=Lo(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var JE=zE;const Pi=Gn,ps=zr,QE=Ie,ms=Kc,ZE=rn,ey=a0,ty=c0,ny=f0,ry=h0,iy=g0,oy=v0,ay=A0,sy=C0,ly=He,cy=I0,uy=N0,fy=Ro,dy=L0,hy=M0,py=Kr,my=Po,gy=Jc,Ey=Qc,yy=No,vy=Do,wy=Zc,_y=lE,Ay=Jr(),Sy=je(),Ty=Qr,Cy=mE,$y=vE,by=SE,Oy=$E,Iy=IE,Ry=Fo,Py=ME,Ny=jE,Dy=GE,Fy=YE,xy=JE;var tu={parse:ZE,valid:ey,clean:ty,inc:ny,diff:ry,major:iy,minor:oy,patch:ay,prerelease:sy,compare:ly,rcompare:cy,compareLoose:uy,compareBuild:fy,sort:dy,rsort:hy,gt:py,lt:my,eq:gy,neq:Ey,gte:yy,lte:vy,cmp:wy,coerce:_y,Comparator:Ay,Range:Sy,satisfies:Ty,toComparators:Cy,maxSatisfying:$y,minSatisfying:by,minVersion:Oy,validRange:Iy,outside:Ry,gtr:Py,ltr:Ny,intersects:Dy,simplifyRange:Fy,subset:xy,SemVer:QE,re:Pi.re,src:Pi.src,tokens:Pi.t,SEMVER_SPEC_VERSION:ps.SEMVER_SPEC_VERSION,RELEASE_TYPES:ps.RELEASE_TYPES,compareIdentifiers:ms.compareIdentifiers,rcompareIdentifiers:ms.rcompareIdentifiers},Wn={},Lr={exports:{}};Lr.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",l="[object Array]",m="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",h="[object Error]",g="[object Function]",_="[object GeneratorFunction]",y="[object Map]",A="[object Number]",T="[object Null]",S="[object Object]",D="[object Promise]",x="[object Proxy]",Z="[object RegExp]",oe="[object Set]",V="[object String]",Ne="[object Symbol]",E="[object Undefined]",q="[object WeakMap]",B="[object ArrayBuffer]",M="[object DataView]",z="[object Float32Array]",I="[object Float64Array]",b="[object Int8Array]",P="[object Int16Array]",$="[object Int32Array]",N="[object Uint8Array]",R="[object Uint8ClampedArray]",k="[object Uint16Array]",G="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,U={};U[z]=U[I]=U[b]=U[P]=U[$]=U[N]=U[R]=U[k]=U[G]=!0,U[s]=U[l]=U[B]=U[c]=U[M]=U[f]=U[h]=U[g]=U[y]=U[A]=U[S]=U[Z]=U[oe]=U[V]=U[q]=!1;var qe=typeof Se=="object"&&Se&&Se.Object===Object&&Se,d=typeof self=="object"&&self&&self.Object===Object&&self,u=qe||d||Function("return this")(),C=t&&!t.nodeType&&t,w=C&&!0&&e&&!e.nodeType&&e,Y=w&&w.exports===C,ee=Y&&qe.process,re=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),pe=re&&re.isTypedArray;function ye(p,v){for(var O=-1,F=p==null?0:p.length,J=0,j=[];++O<F;){var ie=p[O];v(ie,O,p)&&(j[J++]=ie)}return j}function et(p,v){for(var O=-1,F=v.length,J=p.length;++O<F;)p[J+O]=v[O];return p}function le(p,v){for(var O=-1,F=p==null?0:p.length;++O<F;)if(v(p[O],O,p))return!0;return!1}function Ue(p,v){for(var O=-1,F=Array(p);++O<p;)F[O]=v(O);return F}function si(p){return function(v){return p(v)}}function Xn(p,v){return p.has(v)}function an(p,v){return p==null?void 0:p[v]}function Kn(p){var v=-1,O=Array(p.size);return p.forEach(function(F,J){O[++v]=[J,F]}),O}function hu(p,v){return function(O){return p(v(O))}}function pu(p){var v=-1,O=Array(p.size);return p.forEach(function(F){O[++v]=F}),O}var mu=Array.prototype,gu=Function.prototype,Jn=Object.prototype,li=u["__core-js_shared__"],Bo=gu.toString,Ge=Jn.hasOwnProperty,Ho=function(){var p=/[^.]+$/.exec(li&&li.keys&&li.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),jo=Jn.toString,Eu=RegExp("^"+Bo.call(Ge).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qo=Y?u.Buffer:void 0,Qn=u.Symbol,Go=u.Uint8Array,Wo=Jn.propertyIsEnumerable,yu=mu.splice,yt=Qn?Qn.toStringTag:void 0,Vo=Object.getOwnPropertySymbols,vu=qo?qo.isBuffer:void 0,wu=hu(Object.keys,Object),ci=Ft(u,"DataView"),sn=Ft(u,"Map"),ui=Ft(u,"Promise"),fi=Ft(u,"Set"),di=Ft(u,"WeakMap"),ln=Ft(Object,"create"),_u=_t(ci),Au=_t(sn),Su=_t(ui),Tu=_t(fi),Cu=_t(di),Yo=Qn?Qn.prototype:void 0,hi=Yo?Yo.valueOf:void 0;function vt(p){var v=-1,O=p==null?0:p.length;for(this.clear();++v<O;){var F=p[v];this.set(F[0],F[1])}}function $u(){this.__data__=ln?ln(null):{},this.size=0}function bu(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}function Ou(p){var v=this.__data__;if(ln){var O=v[p];return O===r?void 0:O}return Ge.call(v,p)?v[p]:void 0}function Iu(p){var v=this.__data__;return ln?v[p]!==void 0:Ge.call(v,p)}function Ru(p,v){var O=this.__data__;return this.size+=this.has(p)?0:1,O[p]=ln&&v===void 0?r:v,this}vt.prototype.clear=$u,vt.prototype.delete=bu,vt.prototype.get=Ou,vt.prototype.has=Iu,vt.prototype.set=Ru;function Xe(p){var v=-1,O=p==null?0:p.length;for(this.clear();++v<O;){var F=p[v];this.set(F[0],F[1])}}function Pu(){this.__data__=[],this.size=0}function Nu(p){var v=this.__data__,O=er(v,p);if(O<0)return!1;var F=v.length-1;return O==F?v.pop():yu.call(v,O,1),--this.size,!0}function Du(p){var v=this.__data__,O=er(v,p);return O<0?void 0:v[O][1]}function Fu(p){return er(this.__data__,p)>-1}function xu(p,v){var O=this.__data__,F=er(O,p);return F<0?(++this.size,O.push([p,v])):O[F][1]=v,this}Xe.prototype.clear=Pu,Xe.prototype.delete=Nu,Xe.prototype.get=Du,Xe.prototype.has=Fu,Xe.prototype.set=xu;function wt(p){var v=-1,O=p==null?0:p.length;for(this.clear();++v<O;){var F=p[v];this.set(F[0],F[1])}}function Lu(){this.size=0,this.__data__={hash:new vt,map:new(sn||Xe),string:new vt}}function Uu(p){var v=tr(this,p).delete(p);return this.size-=v?1:0,v}function ku(p){return tr(this,p).get(p)}function Mu(p){return tr(this,p).has(p)}function Bu(p,v){var O=tr(this,p),F=O.size;return O.set(p,v),this.size+=O.size==F?0:1,this}wt.prototype.clear=Lu,wt.prototype.delete=Uu,wt.prototype.get=ku,wt.prototype.has=Mu,wt.prototype.set=Bu;function Zn(p){var v=-1,O=p==null?0:p.length;for(this.__data__=new wt;++v<O;)this.add(p[v])}function Hu(p){return this.__data__.set(p,r),this}function ju(p){return this.__data__.has(p)}Zn.prototype.add=Zn.prototype.push=Hu,Zn.prototype.has=ju;function tt(p){var v=this.__data__=new Xe(p);this.size=v.size}function qu(){this.__data__=new Xe,this.size=0}function Gu(p){var v=this.__data__,O=v.delete(p);return this.size=v.size,O}function Wu(p){return this.__data__.get(p)}function Vu(p){return this.__data__.has(p)}function Yu(p,v){var O=this.__data__;if(O instanceof Xe){var F=O.__data__;if(!sn||F.length<n-1)return F.push([p,v]),this.size=++O.size,this;O=this.__data__=new wt(F)}return O.set(p,v),this.size=O.size,this}tt.prototype.clear=qu,tt.prototype.delete=Gu,tt.prototype.get=Wu,tt.prototype.has=Vu,tt.prototype.set=Yu;function zu(p,v){var O=nr(p),F=!O&&uf(p),J=!O&&!F&&pi(p),j=!O&&!F&&!J&&na(p),ie=O||F||J||j,fe=ie?Ue(p.length,String):[],me=fe.length;for(var te in p)Ge.call(p,te)&&!(ie&&(te=="length"||J&&(te=="offset"||te=="parent")||j&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||of(te,me)))&&fe.push(te);return fe}function er(p,v){for(var O=p.length;O--;)if(Qo(p[O][0],v))return O;return-1}function Xu(p,v,O){var F=v(p);return nr(p)?F:et(F,O(p))}function cn(p){return p==null?p===void 0?E:T:yt&&yt in Object(p)?nf(p):cf(p)}function zo(p){return un(p)&&cn(p)==s}function Xo(p,v,O,F,J){return p===v?!0:p==null||v==null||!un(p)&&!un(v)?p!==p&&v!==v:Ku(p,v,O,F,Xo,J)}function Ku(p,v,O,F,J,j){var ie=nr(p),fe=nr(v),me=ie?l:nt(p),te=fe?l:nt(v);me=me==s?S:me,te=te==s?S:te;var De=me==S,ke=te==S,ve=me==te;if(ve&&pi(p)){if(!pi(v))return!1;ie=!0,De=!1}if(ve&&!De)return j||(j=new tt),ie||na(p)?Ko(p,v,O,F,J,j):ef(p,v,me,O,F,J,j);if(!(O&i)){var Fe=De&&Ge.call(p,"__wrapped__"),xe=ke&&Ge.call(v,"__wrapped__");if(Fe||xe){var rt=Fe?p.value():p,Ke=xe?v.value():v;return j||(j=new tt),J(rt,Ke,O,F,j)}}return ve?(j||(j=new tt),tf(p,v,O,F,J,j)):!1}function Ju(p){if(!ta(p)||sf(p))return!1;var v=Zo(p)?Eu:X;return v.test(_t(p))}function Qu(p){return un(p)&&ea(p.length)&&!!U[cn(p)]}function Zu(p){if(!lf(p))return wu(p);var v=[];for(var O in Object(p))Ge.call(p,O)&&O!="constructor"&&v.push(O);return v}function Ko(p,v,O,F,J,j){var ie=O&i,fe=p.length,me=v.length;if(fe!=me&&!(ie&&me>fe))return!1;var te=j.get(p);if(te&&j.get(v))return te==v;var De=-1,ke=!0,ve=O&o?new Zn:void 0;for(j.set(p,v),j.set(v,p);++De<fe;){var Fe=p[De],xe=v[De];if(F)var rt=ie?F(xe,Fe,De,v,p,j):F(Fe,xe,De,p,v,j);if(rt!==void 0){if(rt)continue;ke=!1;break}if(ve){if(!le(v,function(Ke,At){if(!Xn(ve,At)&&(Fe===Ke||J(Fe,Ke,O,F,j)))return ve.push(At)})){ke=!1;break}}else if(!(Fe===xe||J(Fe,xe,O,F,j))){ke=!1;break}}return j.delete(p),j.delete(v),ke}function ef(p,v,O,F,J,j,ie){switch(O){case M:if(p.byteLength!=v.byteLength||p.byteOffset!=v.byteOffset)return!1;p=p.buffer,v=v.buffer;case B:return!(p.byteLength!=v.byteLength||!j(new Go(p),new Go(v)));case c:case f:case A:return Qo(+p,+v);case h:return p.name==v.name&&p.message==v.message;case Z:case V:return p==v+"";case y:var fe=Kn;case oe:var me=F&i;if(fe||(fe=pu),p.size!=v.size&&!me)return!1;var te=ie.get(p);if(te)return te==v;F|=o,ie.set(p,v);var De=Ko(fe(p),fe(v),F,J,j,ie);return ie.delete(p),De;case Ne:if(hi)return hi.call(p)==hi.call(v)}return!1}function tf(p,v,O,F,J,j){var ie=O&i,fe=Jo(p),me=fe.length,te=Jo(v),De=te.length;if(me!=De&&!ie)return!1;for(var ke=me;ke--;){var ve=fe[ke];if(!(ie?ve in v:Ge.call(v,ve)))return!1}var Fe=j.get(p);if(Fe&&j.get(v))return Fe==v;var xe=!0;j.set(p,v),j.set(v,p);for(var rt=ie;++ke<me;){ve=fe[ke];var Ke=p[ve],At=v[ve];if(F)var ra=ie?F(At,Ke,ve,v,p,j):F(Ke,At,ve,p,v,j);if(!(ra===void 0?Ke===At||J(Ke,At,O,F,j):ra)){xe=!1;break}rt||(rt=ve=="constructor")}if(xe&&!rt){var rr=p.constructor,ir=v.constructor;rr!=ir&&"constructor"in p&&"constructor"in v&&!(typeof rr=="function"&&rr instanceof rr&&typeof ir=="function"&&ir instanceof ir)&&(xe=!1)}return j.delete(p),j.delete(v),xe}function Jo(p){return Xu(p,hf,rf)}function tr(p,v){var O=p.__data__;return af(v)?O[typeof v=="string"?"string":"hash"]:O.map}function Ft(p,v){var O=an(p,v);return Ju(O)?O:void 0}function nf(p){var v=Ge.call(p,yt),O=p[yt];try{p[yt]=void 0;var F=!0}catch{}var J=jo.call(p);return F&&(v?p[yt]=O:delete p[yt]),J}var rf=Vo?function(p){return p==null?[]:(p=Object(p),ye(Vo(p),function(v){return Wo.call(p,v)}))}:pf,nt=cn;(ci&&nt(new ci(new ArrayBuffer(1)))!=M||sn&&nt(new sn)!=y||ui&&nt(ui.resolve())!=D||fi&&nt(new fi)!=oe||di&&nt(new di)!=q)&&(nt=function(p){var v=cn(p),O=v==S?p.constructor:void 0,F=O?_t(O):"";if(F)switch(F){case _u:return M;case Au:return y;case Su:return D;case Tu:return oe;case Cu:return q}return v});function of(p,v){return v=v??a,!!v&&(typeof p=="number"||ue.test(p))&&p>-1&&p%1==0&&p<v}function af(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}function sf(p){return!!Ho&&Ho in p}function lf(p){var v=p&&p.constructor,O=typeof v=="function"&&v.prototype||Jn;return p===O}function cf(p){return jo.call(p)}function _t(p){if(p!=null){try{return Bo.call(p)}catch{}try{return p+""}catch{}}return""}function Qo(p,v){return p===v||p!==p&&v!==v}var uf=zo(function(){return arguments}())?zo:function(p){return un(p)&&Ge.call(p,"callee")&&!Wo.call(p,"callee")},nr=Array.isArray;function ff(p){return p!=null&&ea(p.length)&&!Zo(p)}var pi=vu||mf;function df(p,v){return Xo(p,v)}function Zo(p){if(!ta(p))return!1;var v=cn(p);return v==g||v==_||v==m||v==x}function ea(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=a}function ta(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}function un(p){return p!=null&&typeof p=="object"}var na=pe?si(pe):Qu;function hf(p){return ff(p)?zu(p):Zu(p)}function pf(){return[]}function mf(){return!1}e.exports=df})(Lr,Lr.exports);var Ly=Lr.exports;Object.defineProperty(Wn,"__esModule",{value:!0});Wn.DownloadedUpdateHelper=void 0;Wn.createTempUpdateFile=Hy;const Uy=kn,ky=mt,gs=Ly,Tt=gt,_n=Q;class My{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return _n.join(this.cacheDir,"pending")}async validateDownloadedPath(t,n,r,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return gs(this.versionInfo,n)&&gs(this.fileInfo.info,r.info)&&await(0,Tt.pathExists)(t)?t:null;const o=await this.getValidCachedUpdateFile(r,i);return o===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=o,o)}async setDownloadedFile(t,n,r,i,o,a){this._file=t,this._packageFile=n,this.versionInfo=r,this.fileInfo=i,this._downloadedFileInfo={fileName:o,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},a&&await(0,Tt.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Tt.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,n){const r=this.getUpdateInfoFile();if(!await(0,Tt.pathExists)(r))return null;let o;try{o=await(0,Tt.readJson)(r)}catch(m){let c="No cached update info available";return m.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=` (error on read: ${m.message})`),n.info(c),null}if(!((o==null?void 0:o.fileName)!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const s=_n.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,Tt.pathExists)(s))return n.info("Cached update file doesn't exist"),null;const l=await By(s);return t.info.sha512!==l?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,s)}getUpdateInfoFile(){return _n.join(this.cacheDirForPendingUpdate,"update-info.json")}}Wn.DownloadedUpdateHelper=My;function By(e,t="sha512",n="base64",r){return new Promise((i,o)=>{const a=(0,Uy.createHash)(t);a.on("error",o).setEncoding(n),(0,ky.createReadStream)(e,{...r,highWaterMark:1024*1024}).on("error",o).on("end",()=>{a.end(),i(a.read())}).pipe(a,{end:!1})})}async function Hy(e,t,n){let r=0,i=_n.join(t,e);for(let o=0;o<3;o++)try{return await(0,Tt.unlink)(i),i}catch(a){if(a.code==="ENOENT")return i;n.warn(`Error on remove temp update file: ${a}`),i=_n.join(t,`${r++}-${e}`)}return i}var Zr={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.getAppCacheDir=qy;const Ni=Q,jy=kr;function qy(){const e=(0,jy.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||Ni.join(e,"AppData","Local"):process.platform==="darwin"?t=Ni.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||Ni.join(e,".cache"),t}Object.defineProperty(Zr,"__esModule",{value:!0});Zr.ElectronAppAdapter=void 0;const Es=Q,Gy=Uo;class Wy{constructor(t=ae.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?Es.join(process.resourcesPath,"app-update.yml"):Es.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,Gy.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(n,r)=>t(r))}}Zr.ElectronAppAdapter=Wy;var nu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=n;const t=he;e.NET_SESSION_NAME="electron-updater";function n(){return ae.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class r extends t.HttpExecutor{constructor(o){super(),this.proxyLoginCallback=o,this.cachedSession=null}async download(o,a,s){return await s.cancellationToken.createPromise((l,m,c)=>{const f={headers:s.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(o,f),(0,t.configureRequestOptions)(f),this.doDownload(f,{destination:a,options:s,onCancel:c,callback:h=>{h==null?l(a):m(h)},responseHandler:null},0)})}createRequest(o,a){o.headers&&o.headers.Host&&(o.host=o.headers.Host,delete o.headers.Host),this.cachedSession==null&&(this.cachedSession=n());const s=ae.net.request({...o,session:this.cachedSession});return s.on("response",a),this.proxyLoginCallback!=null&&s.on("login",this.proxyLoginCallback),s}addRedirectHandlers(o,a,s,l,m){o.on("redirect",(c,f,h)=>{o.abort(),l>this.maxRedirects?s(this.createMaxRedirectError()):m(t.HttpExecutor.prepareRedirectUrlOptions(h,a))})}}e.ElectronHttpExecutor=r})(nu);var Vn={},Le={},Vy="[object Symbol]",ru=/[\\^$.*+?()[\]{}|]/g,Yy=RegExp(ru.source),zy=typeof Se=="object"&&Se&&Se.Object===Object&&Se,Xy=typeof self=="object"&&self&&self.Object===Object&&self,Ky=zy||Xy||Function("return this")(),Jy=Object.prototype,Qy=Jy.toString,ys=Ky.Symbol,vs=ys?ys.prototype:void 0,ws=vs?vs.toString:void 0;function Zy(e){if(typeof e=="string")return e;if(tv(e))return ws?ws.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ev(e){return!!e&&typeof e=="object"}function tv(e){return typeof e=="symbol"||ev(e)&&Qy.call(e)==Vy}function nv(e){return e==null?"":Zy(e)}function rv(e){return e=nv(e),e&&Yy.test(e)?e.replace(ru,"\\$&"):e}var iv=rv;Object.defineProperty(Le,"__esModule",{value:!0});Le.newBaseUrl=av;Le.newUrlFromBase=ro;Le.getChannelFilename=sv;Le.blockmapFiles=lv;const iu=en,ov=iv;function av(e){const t=new iu.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function ro(e,t,n=!1){const r=new iu.URL(e,t),i=t.search;return i!=null&&i.length!==0?r.search=i:n&&(r.search=`noCache=${Date.now().toString(32)}`),r}function sv(e){return`${e}.yml`}function lv(e,t,n){const r=ro(`${e.pathname}.blockmap`,e);return[ro(`${e.pathname.replace(new RegExp(ov(n),"g"),t)}.blockmap`,e),r]}var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.Provider=void 0;ce.findFile=fv;ce.parseUpdateInfo=dv;ce.getFileList=ou;ce.resolveFiles=hv;const ht=he,cv=Ee,_s=Le;class uv{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,n,r){return this.executor.request(this.createRequestOptions(t,n),r)}createRequestOptions(t,n){const r={};return this.requestHeaders==null?n!=null&&(r.headers=n):r.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,ht.configureRequestUrl)(t,r),r}}ce.Provider=uv;function fv(e,t,n){if(e.length===0)throw(0,ht.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const r=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return r??(n==null?e[0]:e.find(i=>!n.some(o=>i.url.pathname.toLowerCase().endsWith(`.${o}`))))}function dv(e,t,n){if(e==null)throw(0,ht.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let r;try{r=(0,cv.load)(e)}catch(i){throw(0,ht.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return r}function ou(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,ht.newError)(`No files provided: ${(0,ht.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function hv(e,t,n=r=>r){const i=ou(e).map(s=>{if(s.sha2==null&&s.sha512==null)throw(0,ht.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,ht.safeStringifyJson)(s)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,_s.newUrlFromBase)(n(s.url),t),info:s}}),o=e.packages,a=o==null?null:o[process.arch]||o.ia32;return a!=null&&(i[0].packageInfo={...a,path:(0,_s.newUrlFromBase)(n(a.path),t).href}),i}Object.defineProperty(Vn,"__esModule",{value:!0});Vn.GenericProvider=void 0;const As=he,Di=Le,Fi=ce;class pv extends Fi.Provider{constructor(t,n,r){super(r),this.configuration=t,this.updater=n,this.baseUrl=(0,Di.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,Di.getChannelFilename)(this.channel),n=(0,Di.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let r=0;;r++)try{return(0,Fi.parseUpdateInfo)(await this.httpRequest(n),t,n)}catch(i){if(i instanceof As.HttpError&&i.statusCode===404)throw(0,As.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&r<3){await new Promise((o,a)=>{try{setTimeout(o,1e3*r)}catch(s){a(s)}});continue}throw i}}resolveFiles(t){return(0,Fi.resolveFiles)(t,this.baseUrl)}}Vn.GenericProvider=pv;var ei={},ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.BitbucketProvider=void 0;const Ss=he,xi=Le,Li=ce;class mv extends Li.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n;const{owner:i,slug:o}=t;this.baseUrl=(0,xi.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${o}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new Ss.CancellationToken,n=(0,xi.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,xi.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,void 0,t);return(0,Li.parseUpdateInfo)(i,n,r)}catch(i){throw(0,Ss.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Li.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:n}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${n}, channel: ${this.channel})`}}ti.BitbucketProvider=mv;var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.GitHubProvider=pt.BaseGitHubProvider=void 0;pt.computeReleaseNotes=su;const Je=he,Wt=tu,gv=en,Vt=Le,io=ce,Ui=/\/tag\/([^/]+)$/;class au extends io.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,Vt.newBaseUrl)((0,Je.githubUrl)(t,n));const i=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,Vt.newBaseUrl)((0,Je.githubUrl)(t,i))}computeGithubBasePath(t){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${t}`:t}}pt.BaseGitHubProvider=au;class Ev extends au{constructor(t,n,r){super(t,"github.com",r),this.options=t,this.updater=n}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,n,r,i,o;const a=new Je.CancellationToken,s=await this.httpRequest((0,Vt.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},a),l=(0,Je.parseXml)(s);let m=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){const A=((t=this.updater)===null||t===void 0?void 0:t.channel)||((n=Wt.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(A===null)c=Ui.exec(m.element("link").attribute("href"))[1];else for(const T of l.getElements("entry")){const S=Ui.exec(T.element("link").attribute("href"));if(S===null)continue;const D=S[1],x=((r=Wt.prerelease(D))===null||r===void 0?void 0:r[0])||null,Z=!A||["alpha","beta"].includes(A),oe=x!==null&&!["alpha","beta"].includes(String(x));if(Z&&!oe&&!(A==="beta"&&x==="alpha")){c=D;break}if(x&&x===A){c=D;break}}}else{c=await this.getLatestTagName(a);for(const A of l.getElements("entry"))if(Ui.exec(A.element("link").attribute("href"))[1]===c){m=A;break}}}catch(A){throw(0,Je.newError)(`Cannot parse releases feed: ${A.stack||A.message},
XML:
${s}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,Je.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let f,h="",g="";const _=async A=>{h=(0,Vt.getChannelFilename)(A),g=(0,Vt.newUrlFromBase)(this.getBaseDownloadPath(String(c),h),this.baseUrl);const T=this.createRequestOptions(g);try{return await this.executor.request(T,a)}catch(S){throw S instanceof Je.HttpError&&S.statusCode===404?(0,Je.newError)(`Cannot find ${h} in the latest release artifacts (${g}): ${S.stack||S.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):S}};try{let A=this.channel;this.updater.allowPrerelease&&(!((i=Wt.prerelease(c))===null||i===void 0)&&i[0])&&(A=this.getCustomChannelName(String((o=Wt.prerelease(c))===null||o===void 0?void 0:o[0]))),f=await _(A)}catch(A){if(this.updater.allowPrerelease)f=await _(this.getDefaultChannelName());else throw A}const y=(0,io.parseUpdateInfo)(f,h,g);return y.releaseName==null&&(y.releaseName=m.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=su(this.updater.currentVersion,this.updater.fullChangelog,l,m)),{tag:c,...y}}async getLatestTagName(t){const n=this.options,r=n.host==null||n.host==="github.com"?(0,Vt.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new gv.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(r,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,Je.newError)(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,io.resolveFiles)(t,this.baseUrl,n=>this.getBaseDownloadPath(t.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(t,n){return`${this.basePath}/download/${t}/${n}`}}pt.GitHubProvider=Ev;function Ts(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function su(e,t,n,r){if(!t)return Ts(r);const i=[];for(const o of n.getElements("entry")){const a=/\/tag\/v?([^/]+)$/.exec(o.element("link").attribute("href"))[1];Wt.lt(e,a)&&i.push({version:a,note:Ts(o)})}return i.sort((o,a)=>Wt.rcompare(o.version,a.version))}var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.KeygenProvider=void 0;const Cs=he,ki=Le,Mi=ce;class yv extends Mi.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,ki.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new Cs.CancellationToken,n=(0,ki.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,ki.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,Mi.parseUpdateInfo)(i,n,r)}catch(i){throw(0,Cs.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Mi.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:n,platform:r}=this.configuration;return`Keygen (account: ${t}, product: ${n}, platform: ${r}, channel: ${this.channel})`}}ni.KeygenProvider=yv;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.PrivateGitHubProvider=void 0;const kt=he,vv=Ee,wv=Q,$s=en,bs=Le,_v=pt,Av=ce;class Sv extends _v.BaseGitHubProvider{constructor(t,n,r,i){super(t,"api.github.com",i),this.updater=n,this.token=r}createRequestOptions(t,n){const r=super.createRequestOptions(t,n);return r.redirect="manual",r}async getLatestVersion(){const t=new kt.CancellationToken,n=(0,bs.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(t),i=r.assets.find(s=>s.name===n);if(i==null)throw(0,kt.newError)(`Cannot find ${n} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const o=new $s.URL(i.url);let a;try{a=(0,vv.load)(await this.httpRequest(o,this.configureHeaders("application/octet-stream"),t))}catch(s){throw s instanceof kt.HttpError&&s.statusCode===404?(0,kt.newError)(`Cannot find ${n} in the latest release artifacts (${o}): ${s.stack||s.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):s}return a.assets=r.assets,a}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const n=this.updater.allowPrerelease;let r=this.basePath;n||(r=`${r}/latest`);const i=(0,bs.newUrlFromBase)(r,this.baseUrl);try{const o=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return n?o.find(a=>a.prerelease)||o[0]:o}catch(o){throw(0,kt.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Av.getFileList)(t).map(n=>{const r=wv.posix.basename(n.url).replace(/ /g,"-"),i=t.assets.find(o=>o!=null&&o.name===r);if(i==null)throw(0,kt.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new $s.URL(i.url),info:n}})}}ri.PrivateGitHubProvider=Sv;Object.defineProperty(ei,"__esModule",{value:!0});ei.isUrlProbablySupportMultiRangeRequests=lu;ei.createClient=Ov;const Er=he,Tv=ti,Os=Vn,Cv=pt,$v=ni,bv=ri;function lu(e){return!e.includes("s3.amazonaws.com")}function Ov(e,t,n){if(typeof e=="string")throw(0,Er.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const r=e.provider;switch(r){case"github":{const i=e,o=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return o==null?new Cv.GitHubProvider(i,t,n):new bv.PrivateGitHubProvider(i,t,o,n)}case"bitbucket":return new Tv.BitbucketProvider(e,t,n);case"keygen":return new $v.KeygenProvider(e,t,n);case"s3":case"spaces":return new Os.GenericProvider({provider:"generic",url:(0,Er.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...n,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new Os.GenericProvider(i,t,{...n,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&lu(i.url)})}case"custom":{const i=e,o=i.updateProvider;if(!o)throw(0,Er.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new o(i,t,n)}default:throw(0,Er.newError)(`Unsupported provider: ${r}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var ii={},Yn={},on={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.OperationKind=void 0;Dt.computeOperations=Iv;var bt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(bt||(Dt.OperationKind=bt={}));function Iv(e,t,n){const r=Rs(e.files),i=Rs(t.files);let o=null;const a=t.files[0],s=[],l=a.name,m=r.get(l);if(m==null)throw new Error(`no file ${l} in old blockmap`);const c=i.get(l);let f=0;const{checksumToOffset:h,checksumToOldSize:g}=Pv(r.get(l),m.offset,n);let _=a.offset;for(let y=0;y<c.checksums.length;_+=c.sizes[y],y++){const A=c.sizes[y],T=c.checksums[y];let S=h.get(T);S!=null&&g.get(T)!==A&&(n.warn(`Checksum ("${T}") matches, but size differs (old: ${g.get(T)}, new: ${A})`),S=void 0),S===void 0?(f++,o!=null&&o.kind===bt.DOWNLOAD&&o.end===_?o.end+=A:(o={kind:bt.DOWNLOAD,start:_,end:_+A},Is(o,s,T,y))):o!=null&&o.kind===bt.COPY&&o.end===S?o.end+=A:(o={kind:bt.COPY,start:S,end:S+A},Is(o,s,T,y))}return f>0&&n.info(`File${a.name==="file"?"":" "+a.name} has ${f} changed blocks`),s}const Rv=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function Is(e,t,n,r){if(Rv&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const o=[i.start,i.end,e.start,e.end].reduce((a,s)=>a<s?a:s);throw new Error(`operation (block index: ${r}, checksum: ${n}, kind: ${bt[e.kind]}) overlaps previous operation (checksum: ${n}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-o} until ${i.end-o} and ${e.start-o} until ${e.end-o}`)}}t.push(e)}function Pv(e,t,n){const r=new Map,i=new Map;let o=t;for(let a=0;a<e.checksums.length;a++){const s=e.checksums[a],l=e.sizes[a],m=i.get(s);if(m===void 0)r.set(s,o),i.set(s,l);else if(n.debug!=null){const c=m===l?"(same size)":`(size: ${m}, this size: ${l})`;n.debug(`${s} duplicated in blockmap ${c}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=l}return{checksumToOffset:r,checksumToOldSize:i}}function Rs(e){const t=new Map;for(const n of e)t.set(n.name,n);return t}Object.defineProperty(on,"__esModule",{value:!0});on.DataSplitter=void 0;on.copyData=cu;const yr=he,Nv=mt,Dv=Un,Fv=Dt,Ps=Buffer.from(`\r
\r
`);var ot;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(ot||(ot={}));function cu(e,t,n,r,i){const o=(0,Nv.createReadStream)("",{fd:n,autoClose:!1,start:e.start,end:e.end-1});o.on("error",r),o.once("end",i),o.pipe(t,{end:!1})}class xv extends Dv.Writable{constructor(t,n,r,i,o,a){super(),this.out=t,this.options=n,this.partIndexToTaskIndex=r,this.partIndexToLength=o,this.finishHandler=a,this.partIndex=-1,this.headerListBuffer=null,this.readState=ot.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,n,r){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(r).catch(r)}async handleData(t){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,yr.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=r,n=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=r,await this.processPartData(t,0,r),n=r}if(n!==t.length){if(this.readState===ot.HEADER){const r=this.searchHeaderListEnd(t,n);if(r===-1)return;n=r,this.readState=ot.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ot.BODY)this.readState=ot.INIT;else{this.partIndex++;let a=this.partIndexToTaskIndex.get(this.partIndex);if(a==null)if(this.isFinished)a=this.options.end;else throw(0,yr.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const s=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(s<a)await this.copyExistingData(s,a);else if(s>a)throw(0,yr.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(t,n),n===-1){this.readState=ot.HEADER;return}}const r=this.partIndexToLength[this.partIndex],i=n+r,o=Math.min(i,t.length);if(await this.processPartStarted(t,n,o),this.remainingPartDataCount=r-(o-n),this.remainingPartDataCount>0)return;if(n=i+this.boundaryLength,n>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,n){return new Promise((r,i)=>{const o=()=>{if(t===n){r();return}const a=this.options.tasks[t];if(a.kind!==Fv.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}cu(a,this.out,this.options.oldFileFd,i,()=>{t++,o()})};o()})}searchHeaderListEnd(t,n){const r=t.indexOf(Ps,n);if(r!==-1)return r+Ps.length;const i=n===0?t:t.slice(n);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,yr.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,n,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,n,r)}processPartData(t,n,r){this.actualPartLength+=r-n;const i=this.out;return i.write(n===0&&t.length===r?t:t.slice(n,r))?Promise.resolve():new Promise((o,a)=>{i.on("error",a),i.once("drain",()=>{i.removeListener("error",a),o()})})}}on.DataSplitter=xv;var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.executeTasksUsingMultipleRangeRequests=Lv;oi.checkIsRangesSupported=ao;const oo=he,Ns=on,Ds=Dt;function Lv(e,t,n,r,i){const o=a=>{if(a>=t.length){e.fileMetadataBuffer!=null&&n.write(e.fileMetadataBuffer),n.end();return}const s=a+1e3;Uv(e,{tasks:t,start:a,end:Math.min(t.length,s),oldFileFd:r},n,()=>o(s),i)};return o}function Uv(e,t,n,r,i){let o="bytes=",a=0;const s=new Map,l=[];for(let f=t.start;f<t.end;f++){const h=t.tasks[f];h.kind===Ds.OperationKind.DOWNLOAD&&(o+=`${h.start}-${h.end-1}, `,s.set(a,f),a++,l.push(h.end-h.start))}if(a<=1){const f=h=>{if(h>=t.end){r();return}const g=t.tasks[h++];if(g.kind===Ds.OperationKind.COPY)(0,Ns.copyData)(g,n,t.oldFileFd,i,()=>f(h));else{const _=e.createRequestOptions();_.headers.Range=`bytes=${g.start}-${g.end-1}`;const y=e.httpExecutor.createRequest(_,A=>{ao(A,i)&&(A.pipe(n,{end:!1}),A.once("end",()=>f(h)))});e.httpExecutor.addErrorAndTimeoutHandlers(y,i),y.end()}};f(t.start);return}const m=e.createRequestOptions();m.headers.Range=o.substring(0,o.length-2);const c=e.httpExecutor.createRequest(m,f=>{if(!ao(f,i))return;const h=(0,oo.safeGetHeader)(f,"content-type"),g=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(h);if(g==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${h}"`));return}const _=new Ns.DataSplitter(n,t,s,g[1]||g[2],l,r);_.on("error",i),f.pipe(_),f.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function ao(e,t){if(e.statusCode>=400)return t((0,oo.createHttpError)(e)),!1;if(e.statusCode!==206){const n=(0,oo.safeGetHeader)(e,"accept-ranges");if(n==null||n==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.ProgressDifferentialDownloadCallbackTransform=void 0;const kv=Un;var Yt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Yt||(Yt={}));class Mv extends kv.Transform{constructor(t,n,r){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Yt.COPY,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==Yt.COPY){r(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}beginFileCopy(){this.operationType=Yt.COPY}beginRangeDownload(){this.operationType=Yt.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}ai.ProgressDifferentialDownloadCallbackTransform=Mv;Object.defineProperty(Yn,"__esModule",{value:!0});Yn.DifferentialDownloader=void 0;const pn=he,Bi=gt,Bv=mt,Hv=on,jv=en,vr=Dt,Fs=oi,qv=ai;class Gv{constructor(t,n,r){this.blockAwareFileInfo=t,this.httpExecutor=n,this.options=r,this.fileMetadataBuffer=null,this.logger=r.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,pn.configureRequestUrl)(this.options.newUrl,t),(0,pn.configureRequestOptions)(t),t}doDownload(t,n){if(t.version!==n.version)throw new Error(`version is different (${t.version} - ${n.version}), full download is required`);const r=this.logger,i=(0,vr.computeOperations)(t,n,r);r.debug!=null&&r.debug(JSON.stringify(i,null,2));let o=0,a=0;for(const l of i){const m=l.end-l.start;l.kind===vr.OperationKind.DOWNLOAD?o+=m:a+=m}const s=this.blockAwareFileInfo.size;if(o+a+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==s)throw new Error(`Internal error, size mismatch: downloadSize: ${o}, copySize: ${a}, newSize: ${s}`);return r.info(`Full: ${xs(s)}, To download: ${xs(o)} (${Math.round(o/(s/100))}%)`),this.downloadFile(i)}downloadFile(t){const n=[],r=()=>Promise.all(n.map(i=>(0,Bi.close)(i.descriptor).catch(o=>{this.logger.error(`cannot close file "${i.path}": ${o}`)})));return this.doDownloadFile(t,n).then(r).catch(i=>r().catch(o=>{try{this.logger.error(`cannot close files: ${o}`)}catch(a){try{console.error(a)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,n){const r=await(0,Bi.open)(this.options.oldFile,"r");n.push({descriptor:r,path:this.options.oldFile});const i=await(0,Bi.open)(this.options.newFile,"w");n.push({descriptor:i,path:this.options.newFile});const o=(0,Bv.createWriteStream)(this.options.newFile,{fd:i});await new Promise((a,s)=>{const l=[];let m;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const T=[];let S=0;for(const x of t)x.kind===vr.OperationKind.DOWNLOAD&&(T.push(x.end-x.start),S+=x.end-x.start);const D={expectedByteCounts:T,grandTotal:S};m=new qv.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),l.push(m)}const c=new pn.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),o.on("finish",()=>{o.close(()=>{n.splice(1,1);try{c.validate()}catch(T){s(T);return}a(void 0)})}),l.push(o);let f=null;for(const T of l)T.on("error",s),f==null?f=T:f=f.pipe(T);const h=l[0];let g;if(this.options.isUseMultipleRangeRequest){g=(0,Fs.executeTasksUsingMultipleRangeRequests)(this,t,h,r,s),g(0);return}let _=0,y=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const A=this.createRequestOptions();A.redirect="manual",g=T=>{var S,D;if(T>=t.length){this.fileMetadataBuffer!=null&&h.write(this.fileMetadataBuffer),h.end();return}const x=t[T++];if(x.kind===vr.OperationKind.COPY){m&&m.beginFileCopy(),(0,Hv.copyData)(x,h,r,s,()=>g(T));return}const Z=`bytes=${x.start}-${x.end-1}`;A.headers.range=Z,(D=(S=this.logger)===null||S===void 0?void 0:S.debug)===null||D===void 0||D.call(S,`download range: ${Z}`),m&&m.beginRangeDownload();const oe=this.httpExecutor.createRequest(A,V=>{V.on("error",s),V.on("aborted",()=>{s(new Error("response has been aborted by the server"))}),V.statusCode>=400&&s((0,pn.createHttpError)(V)),V.pipe(h,{end:!1}),V.once("end",()=>{m&&m.endRangeDownload(),++_===100?(_=0,setTimeout(()=>g(T),1e3)):g(T)})});oe.on("redirect",(V,Ne,E)=>{this.logger.info(`Redirect to ${Wv(E)}`),y=E,(0,pn.configureRequestUrl)(new jv.URL(y),A),oe.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(oe,s),oe.end()},g(0)})}async readRemoteBytes(t,n){const r=Buffer.allocUnsafe(n+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${n}`;let o=0;if(await this.request(i,a=>{a.copy(r,o),o+=a.length}),o!==r.length)throw new Error(`Received data length ${o} is not equal to expected ${r.length}`);return r}request(t,n){return new Promise((r,i)=>{const o=this.httpExecutor.createRequest(t,a=>{(0,Fs.checkIsRangesSupported)(a,i)&&(a.on("error",i),a.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),a.on("data",n),a.on("end",()=>r()))});this.httpExecutor.addErrorAndTimeoutHandlers(o,i),o.end()})}}Yn.DifferentialDownloader=Gv;function xs(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function Wv(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(ii,"__esModule",{value:!0});ii.GenericDifferentialDownloader=void 0;const Vv=Yn;class Yv extends Vv.DifferentialDownloader{download(t,n){return this.doDownload(t,n)}}ii.GenericDifferentialDownloader=Yv;var Et={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=r;const t=he;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class n{constructor(o){this.emitter=o}login(o){r(this.emitter,"login",o)}progress(o){r(this.emitter,e.DOWNLOAD_PROGRESS,o)}updateDownloaded(o){r(this.emitter,e.UPDATE_DOWNLOADED,o)}updateCancelled(o){r(this.emitter,"update-cancelled",o)}}e.UpdaterSignal=n;function r(i,o,a){i.on(o,a)}})(Et);Object.defineProperty(ut,"__esModule",{value:!0});ut.NoOpLogger=ut.AppUpdater=void 0;const Ae=he,zv=kn,Xv=kr,Kv=nl,Mt=gt,Jv=Ee,Hi=Yr,St=Q,Ct=tu,Ls=Wn,Qv=Zr,Us=nu,Zv=Vn,ji=ei,ew=il,tw=Le,nw=ii,Bt=Et;class ko extends Kv.EventEmitter{get channel(){return this._channel}set channel(t){if(this._channel!=null){if(typeof t!="string")throw(0,Ae.newError)(`Channel must be a string, but got: ${t}`,"ERR_UPDATER_INVALID_CHANNEL");if(t.length===0)throw(0,Ae.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=t,this.allowDowngrade=!0}addAuthHeader(t){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:t})}get netSession(){return(0,Us.getNetSession)()}get logger(){return this._logger}set logger(t){this._logger=t??new uu}set updateConfigPath(t){this.clientPromise=null,this._appUpdateConfigPath=t,this.configOnDisk=new Hi.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(t){t&&(this._isUpdateSupported=t)}constructor(t,n){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Bt.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=o=>this.checkIfUpdateSupported(o),this.clientPromise=null,this.stagingUserIdPromise=new Hi.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new Hi.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",o=>{this._logger.error(`Error: ${o.stack||o.message}`)}),n==null?(this.app=new Qv.ElectronAppAdapter,this.httpExecutor=new Us.ElectronHttpExecutor((o,a)=>this.emit("login",o,a))):(this.app=n,this.httpExecutor=null);const r=this.app.version,i=(0,Ct.parse)(r);if(i==null)throw(0,Ae.newError)(`App version is not a valid semver version: "${r}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=i,this.allowPrerelease=rw(i),t!=null&&(this.setFeedURL(t),typeof t!="string"&&t.requestHeaders&&(this.requestHeaders=t.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(t){const n=this.createProviderRuntimeOptions();let r;typeof t=="string"?r=new Zv.GenericProvider({provider:"generic",url:t},this,{...n,isUseMultipleRangeRequest:(0,ji.isUrlProbablySupportMultiRangeRequests)(t)}):r=(0,ji.createClient)(t,this,n),this.clientPromise=Promise.resolve(r)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let t=this.checkForUpdatesPromise;if(t!=null)return this._logger.info("Checking for update (already in progress)"),t;const n=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),t=this.doCheckForUpdates().then(r=>(n(),r)).catch(r=>{throw n(),this.emit("error",r,`Cannot check for updates: ${(r.stack||r).toString()}`),r}),this.checkForUpdatesPromise=t,t}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(t){return this.checkForUpdates().then(n=>n!=null&&n.downloadPromise?(n.downloadPromise.then(()=>{const r=ko.formatDownloadNotification(n.updateInfo.version,this.app.name,t);new ae.Notification(r).show()}),n):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),n))}static formatDownloadNotification(t,n,r){return r==null&&(r={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),r={title:r.title.replace("{appName}",n).replace("{version}",t),body:r.body.replace("{appName}",n).replace("{version}",t)},r}async isStagingMatch(t){const n=t.stagingPercentage;let r=n;if(r==null)return!0;if(r=parseInt(r,10),isNaN(r))return this._logger.warn(`Staging percentage is NaN: ${n}`),!0;r=r/100;const i=await this.stagingUserIdPromise.value,a=Ae.UUID.parse(i).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${r}, percentage: ${a}, user id: ${i}`),a<r}computeFinalHeaders(t){return this.requestHeaders!=null&&Object.assign(t,this.requestHeaders),t}async isUpdateAvailable(t){const n=(0,Ct.parse)(t.version);if(n==null)throw(0,Ae.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${t.version}"`,"ERR_UPDATER_INVALID_VERSION");const r=this.currentVersion;if((0,Ct.eq)(n,r)||!await Promise.resolve(this.isUpdateSupported(t))||!await this.isStagingMatch(t))return!1;const o=(0,Ct.gt)(n,r),a=(0,Ct.lt)(n,r);return o?!0:this.allowDowngrade&&a}checkIfUpdateSupported(t){const n=t==null?void 0:t.minimumSystemVersion,r=(0,Xv.release)();if(n)try{if((0,Ct.lt)(r,n))return this._logger.info(`Current OS version ${r} is less than the minimum OS version required ${n} for version ${r}`),!1}catch(i){this._logger.warn(`Failed to compare current OS version(${r}) with minimum OS version(${n}): ${(i.message||i).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(r=>(0,ji.createClient)(r,this,this.createProviderRuntimeOptions())));const t=await this.clientPromise,n=await this.stagingUserIdPromise.value;return t.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":n})),{info:await t.getLatestVersion(),provider:t}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const t=await this.getUpdateInfoAndProvider(),n=t.info;if(!await this.isUpdateAvailable(n))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${n.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",n),{isUpdateAvailable:!1,versionInfo:n,updateInfo:n};this.updateInfoAndProvider=t,this.onUpdateAvailable(n);const r=new Ae.CancellationToken;return{isUpdateAvailable:!0,versionInfo:n,updateInfo:n,cancellationToken:r,downloadPromise:this.autoDownload?this.downloadUpdate(r):null}}onUpdateAvailable(t){this._logger.info(`Found version ${t.version} (url: ${(0,Ae.asArray)(t.files).map(n=>n.url).join(", ")})`),this.emit("update-available",t)}downloadUpdate(t=new Ae.CancellationToken){const n=this.updateInfoAndProvider;if(n==null){const i=new Error("Please check update first");return this.dispatchError(i),Promise.reject(i)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,Ae.asArray)(n.info.files).map(i=>i.url).join(", ")}`);const r=i=>{if(!(i instanceof Ae.CancellationError))try{this.dispatchError(i)}catch(o){this._logger.warn(`Cannot dispatch error event: ${o.stack||o}`)}return i};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:n,requestHeaders:this.computeRequestHeaders(n.provider),cancellationToken:t,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(i=>{throw r(i)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(t){this.emit("error",t,(t.stack||t).toString())}dispatchUpdateDownloaded(t){this.emit(Bt.UPDATE_DOWNLOADED,t)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,Jv.load)(await(0,Mt.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(t){const n=t.fileExtraDownloadHeaders;if(n!=null){const r=this.requestHeaders;return r==null?n:{...n,...r}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const t=St.join(this.app.userDataPath,".updaterId");try{const r=await(0,Mt.readFile)(t,"utf-8");if(Ae.UUID.check(r))return r;this._logger.warn(`Staging user id file exists, but content was invalid: ${r}`)}catch(r){r.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${r}`)}const n=Ae.UUID.v5((0,zv.randomBytes)(4096),Ae.UUID.OID);this._logger.info(`Generated new staging user ID: ${n}`);try{await(0,Mt.outputFile)(t,n)}catch(r){this._logger.warn(`Couldn't write out staging user ID: ${r}`)}return n}get isAddNoCacheQuery(){const t=this.requestHeaders;if(t==null)return!0;for(const n of Object.keys(t)){const r=n.toLowerCase();if(r==="authorization"||r==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let t=this.downloadedUpdateHelper;if(t==null){const n=(await this.configOnDisk.value).updaterCacheDirName,r=this._logger;n==null&&r.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const i=St.join(this.app.baseCachePath,n||this.app.name);r.debug!=null&&r.debug(`updater cache dir: ${i}`),t=new Ls.DownloadedUpdateHelper(i),this.downloadedUpdateHelper=t}return t}async executeDownload(t){const n=t.fileInfo,r={headers:t.downloadUpdateOptions.requestHeaders,cancellationToken:t.downloadUpdateOptions.cancellationToken,sha2:n.info.sha2,sha512:n.info.sha512};this.listenerCount(Bt.DOWNLOAD_PROGRESS)>0&&(r.onProgress=S=>this.emit(Bt.DOWNLOAD_PROGRESS,S));const i=t.downloadUpdateOptions.updateInfoAndProvider.info,o=i.version,a=n.packageInfo;function s(){const S=decodeURIComponent(t.fileInfo.url.pathname);return S.endsWith(`.${t.fileExtension}`)?St.basename(S):t.fileInfo.info.url}const l=await this.getOrCreateDownloadHelper(),m=l.cacheDirForPendingUpdate;await(0,Mt.mkdir)(m,{recursive:!0});const c=s();let f=St.join(m,c);const h=a==null?null:St.join(m,`package-${o}${St.extname(a.path)||".7z"}`),g=async S=>(await l.setDownloadedFile(f,h,i,n,c,S),await t.done({...i,downloadedFile:f}),h==null?[f]:[f,h]),_=this._logger,y=await l.validateDownloadedPath(f,i,n,_);if(y!=null)return f=y,await g(!1);const A=async()=>(await l.clear().catch(()=>{}),await(0,Mt.unlink)(f).catch(()=>{})),T=await(0,Ls.createTempUpdateFile)(`temp-${c}`,m,_);try{await t.task(T,r,h,A),await(0,Ae.retry)(()=>(0,Mt.rename)(T,f),60,500,0,0,S=>S instanceof Error&&/^EBUSY:/.test(S.message))}catch(S){throw await A(),S instanceof Ae.CancellationError&&(_.info("cancelled"),this.emit("update-cancelled",i)),S}return _.info(`New version ${o} has been downloaded to ${f}`),await g(!0)}async differentialDownloadInstaller(t,n,r,i,o){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const a=(0,tw.blockmapFiles)(t.url,this.app.version,n.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${a[0]}", new: ${a[1]})`);const s=async c=>{const f=await this.httpExecutor.downloadToBuffer(c,{headers:n.requestHeaders,cancellationToken:n.cancellationToken});if(f==null||f.length===0)throw new Error(`Blockmap "${c.href}" is empty`);try{return JSON.parse((0,ew.gunzipSync)(f).toString())}catch(h){throw new Error(`Cannot parse blockmap "${c.href}", error: ${h}`)}},l={newUrl:t.url,oldFile:St.join(this.downloadedUpdateHelper.cacheDir,o),logger:this._logger,newFile:r,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:n.requestHeaders,cancellationToken:n.cancellationToken};this.listenerCount(Bt.DOWNLOAD_PROGRESS)>0&&(l.onProgress=c=>this.emit(Bt.DOWNLOAD_PROGRESS,c));const m=await Promise.all(a.map(c=>s(c)));return await new nw.GenericDifferentialDownloader(t.info,this.httpExecutor,l).download(m[0],m[1]),!1}catch(a){if(this._logger.error(`Cannot download differentially, fallback to full download: ${a.stack||a}`),this._testOnlyOptions!=null)throw a;return!0}}}ut.AppUpdater=ko;function rw(e){const t=(0,Ct.prerelease)(e);return t!=null&&t.length>0}class uu{info(t){}warn(t){}error(t){}}ut.NoOpLogger=uu;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.BaseUpdater=void 0;const ks=Ur,iw=ut;class ow extends iw.AppUpdater{constructor(t,n){super(t,n),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(t=!1,n=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(t,t?n:this.autoRunAppAfterInstall)?setImmediate(()=>{ae.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(t){return super.executeDownload({...t,done:n=>(this.dispatchUpdateDownloaded(n),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(t=!1,n=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const r=this.downloadedUpdateHelper,i=this.installerPath,o=r==null?null:r.downloadedFileInfo;if(i==null||o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${t}, isForceRunAfter: ${n}`),this.doInstall({isSilent:t,isForceRunAfter:n,isAdminRightsRequired:o.isAdminRightsRequired})}catch(a){return this.dispatchError(a),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(t=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(t!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${t}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:t}=this.app,n=`"${t} would like to update"`,r=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),i=[r];return/kdesudo/i.test(r)?(i.push("--comment",n),i.push("-c")):/gksudo/i.test(r)?i.push("--message",n):/pkexec/i.test(r)&&i.push("--disable-internal-agent"),i.join(" ")}spawnSyncLog(t,n=[],r={}){this._logger.info(`Executing: ${t} with args: ${n}`);const i=(0,ks.spawnSync)(t,n,{env:{...process.env,...r},encoding:"utf-8",shell:!0}),{error:o,status:a,stdout:s,stderr:l}=i;if(o!=null)throw this._logger.error(l),o;if(a!=null&&a!==0)throw this._logger.error(l),new Error(`Command ${t} exited with code ${a}`);return s.trim()}async spawnLog(t,n=[],r=void 0,i="ignore"){return this._logger.info(`Executing: ${t} with args: ${n}`),new Promise((o,a)=>{try{const s={stdio:i,env:r,detached:!0},l=(0,ks.spawn)(t,n,s);l.on("error",m=>{a(m)}),l.unref(),l.pid!==void 0&&o(!0)}catch(s){a(s)}})}}Ze.BaseUpdater=ow;var Pn={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const Ht=gt,aw=Yn,sw=il;class lw extends aw.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,n=t.size,r=n-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(r,n-1);const i=fu(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await cw(this.options.oldFile),i)}}zn.FileWithEmbeddedBlockMapDifferentialDownloader=lw;function fu(e){return JSON.parse((0,sw.inflateRawSync)(e).toString())}async function cw(e){const t=await(0,Ht.open)(e,"r");try{const n=(await(0,Ht.fstat)(t)).size,r=Buffer.allocUnsafe(4);await(0,Ht.read)(t,r,0,r.length,n-r.length);const i=Buffer.allocUnsafe(r.readUInt32BE(0));return await(0,Ht.read)(t,i,0,i.length,n-r.length-i.length),await(0,Ht.close)(t),fu(i)}catch(n){throw await(0,Ht.close)(t),n}}Object.defineProperty(Pn,"__esModule",{value:!0});Pn.AppImageUpdater=void 0;const Ms=he,Bs=Ur,uw=gt,fw=mt,mn=Q,dw=Ze,hw=zn,pw=ce,Hs=Et;class mw extends dw.BaseUpdater{constructor(t,n){super(t,n)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,pw.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{const a=process.env.APPIMAGE;if(a==null)throw(0,Ms.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(t.disableDifferentialDownload||await this.downloadDifferential(r,a,i,n,t))&&await this.httpExecutor.download(r.url,i,o),await(0,uw.chmod)(i,493)}})}async downloadDifferential(t,n,r,i,o){try{const a={newUrl:t.url,oldFile:n,logger:this._logger,newFile:r,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:o.requestHeaders,cancellationToken:o.cancellationToken};return this.listenerCount(Hs.DOWNLOAD_PROGRESS)>0&&(a.onProgress=s=>this.emit(Hs.DOWNLOAD_PROGRESS,s)),await new hw.FileWithEmbeddedBlockMapDifferentialDownloader(t.info,this.httpExecutor,a).download(),!1}catch(a){return this._logger.error(`Cannot download differentially, fallback to full download: ${a.stack||a}`),process.platform==="linux"}}doInstall(t){const n=process.env.APPIMAGE;if(n==null)throw(0,Ms.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,fw.unlinkSync)(n);let r;const i=mn.basename(n),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;mn.basename(o)===i||!/\d+\.\d+\.\d+/.test(i)?r=n:r=mn.join(mn.dirname(n),mn.basename(o)),(0,Bs.execFileSync)("mv",["-f",o,r]),r!==n&&this.emit("appimage-filename-updated",r);const a={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return t.isForceRunAfter?this.spawnLog(r,[],a):(a.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,Bs.execFileSync)(r,[],{env:a})),!0}}Pn.AppImageUpdater=mw;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DebUpdater=void 0;const gw=Ze,Ew=ce,js=Et;class yw extends gw.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,Ew.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(js.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(js.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${o.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Nn.DebUpdater=yw;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.PacmanUpdater=void 0;const vw=Ze,qs=Et,ww=ce;class _w extends vw.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,ww.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(qs.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(qs.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${o.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Dn.PacmanUpdater=_w;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.RpmUpdater=void 0;const Aw=Ze,Gs=Et,Sw=ce;class Tw extends Aw.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,Sw.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(Gs.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(Gs.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.spawnSyncLog("which zypper"),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let a;return i?a=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",o]:a=[this.spawnSyncLog("which dnf || which yum"),"-y","install",o],this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${a.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Fn.RpmUpdater=Tw;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.MacUpdater=void 0;const Ws=he,qi=gt,Cw=mt,Vs=Q,$w=yf,bw=ut,Ow=ce,Ys=Ur,zs=kn;class Iw extends bw.AppUpdater{constructor(t,n){super(t,n),this.nativeUpdater=ae.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",r=>{this._logger.warn(r),this.emit("error",r)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(t){this._logger.debug!=null&&this._logger.debug(t)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(t=>{t&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(t){let n=t.updateInfoAndProvider.provider.resolveFiles(t.updateInfoAndProvider.info);const r=this._logger,i="sysctl.proc_translated";let o=!1;try{this.debug("Checking for macOS Rosetta environment"),o=(0,Ys.execFileSync)("sysctl",[i],{encoding:"utf8"}).includes(`${i}: 1`),r.info(`Checked for macOS Rosetta environment (isRosetta=${o})`)}catch(f){r.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${f}`)}let a=!1;try{this.debug("Checking for arm64 in uname");const h=(0,Ys.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");r.info(`Checked 'uname -a': arm64=${h}`),a=a||h}catch(f){r.warn(`uname shell command to check for arm64 failed: ${f}`)}a=a||process.arch==="arm64"||o;const s=f=>{var h;return f.url.pathname.includes("arm64")||((h=f.info.url)===null||h===void 0?void 0:h.includes("arm64"))};a&&n.some(s)?n=n.filter(f=>a===s(f)):n=n.filter(f=>!s(f));const l=(0,Ow.findFile)(n,"zip",["pkg","dmg"]);if(l==null)throw(0,Ws.newError)(`ZIP file not provided: ${(0,Ws.safeStringifyJson)(n)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const m=t.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:t,task:async(f,h)=>{const g=Vs.join(this.downloadedUpdateHelper.cacheDir,c),_=()=>(0,qi.pathExistsSync)(g)?!t.disableDifferentialDownload:(r.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;_()&&(y=await this.differentialDownloadInstaller(l,t,f,m,c)),y&&await this.httpExecutor.download(l.url,f,h)},done:async f=>{if(!t.disableDifferentialDownload)try{const h=Vs.join(this.downloadedUpdateHelper.cacheDir,c);await(0,qi.copyFile)(f.downloadedFile,h)}catch(h){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${h.message}`)}return this.updateDownloaded(l,f)}})}async updateDownloaded(t,n){var r;const i=n.downloadedFile,o=(r=t.info.size)!==null&&r!==void 0?r:(await(0,qi.stat)(i)).size,a=this._logger,s=`fileToProxy=${t.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${s})`),this.server=(0,$w.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${s})`),this.server.on("close",()=>{a.info(`Proxy server for native Squirrel.Mac is closed (${s})`)});const l=m=>{const c=m.address();return typeof c=="string"?c:`http://127.0.0.1:${c==null?void 0:c.port}`};return await new Promise((m,c)=>{const f=(0,zs.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),h=Buffer.from(`autoupdater:${f}`,"ascii"),g=`/${(0,zs.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(_,y)=>{const A=_.url;if(a.info(`${A} requested`),A==="/"){if(!_.headers.authorization||_.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),a.warn("No authenthication info");return}const D=_.headers.authorization.split(" ")[1],x=Buffer.from(D,"base64").toString("ascii"),[Z,oe]=x.split(":");if(Z!=="autoupdater"||oe!==f){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),a.warn("Invalid authenthication credentials");return}const V=Buffer.from(`{ "url": "${l(this.server)}${g}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":V.length}),y.end(V);return}if(!A.startsWith(g)){a.warn(`${A} requested, but not supported`),y.writeHead(404),y.end();return}a.info(`${g} requested by Squirrel.Mac, pipe ${i}`);let T=!1;y.on("finish",()=>{T||(this.nativeUpdater.removeListener("error",c),m([]))});const S=(0,Cw.createReadStream)(i);S.on("error",D=>{try{y.end()}catch(x){a.warn(`cannot end response: ${x}`)}T=!0,this.nativeUpdater.removeListener("error",c),c(new Error(`Cannot pipe "${i}": ${D}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":o}),S.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${s})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${l(this.server)}, ${s})`),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${h.toString("base64")}`}}),this.dispatchUpdateDownloaded(n),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):m([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}}xn.MacUpdater=Iw;var Ln={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.verifySignature=Pw;const Xs=he,du=Ur,Rw=kr,Ks=Q;function Pw(e,t,n){return new Promise((r,i)=>{const o=t.replace(/'/g,"''");n.info(`Verifying signature ${o}`),(0,du.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${o}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(a,s,l)=>{var m;try{if(a!=null||l){Gi(n,a,l,i),r(null);return}const c=Nw(s);if(c.Status===0){try{const _=Ks.normalize(c.Path),y=Ks.normalize(t);if(n.info(`LiteralPath: ${_}. Update Path: ${y}`),_!==y){Gi(n,new Error(`LiteralPath of ${_} is different than ${y}`),l,i),r(null);return}}catch(_){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(m=_.message)!==null&&m!==void 0?m:_.stack}`)}const h=(0,Xs.parseDn)(c.SignerCertificate.Subject);let g=!1;for(const _ of e){const y=(0,Xs.parseDn)(_);if(y.size?g=Array.from(y.keys()).every(T=>y.get(T)===h.get(T)):_===h.get("CN")&&(n.warn(`Signature validated using only CN ${_}. Please add your full Distinguished Name (DN) to publisherNames configuration`),g=!0),g){r(null);return}}}const f=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(c,(h,g)=>h==="RawData"?void 0:g,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${f}`),r(f)}catch(c){Gi(n,c,null,i),r(null);return}})})}function Nw(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const n=t.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),t}function Gi(e,t,n,r){if(Dw()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,du.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&r(t),n&&r(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function Dw(){const e=Rw.release();return e.startsWith("6.")&&!e.startsWith("6.3")}Object.defineProperty(Ln,"__esModule",{value:!0});Ln.NsisUpdater=void 0;const wr=he,Js=Q,Fw=Ze,xw=zn,Qs=Et,Lw=ce,Uw=gt,kw=Mo,Zs=en;class Mw extends Fw.BaseUpdater{constructor(t,n){super(t,n),this._verifyUpdateCodeSignature=(r,i)=>(0,kw.verifySignature)(r,i,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(t){t&&(this._verifyUpdateCodeSignature=t)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,Lw.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:t,fileInfo:r,task:async(i,o,a,s)=>{const l=r.packageInfo,m=l!=null&&a!=null;if(m&&t.disableWebInstaller)throw(0,wr.newError)(`Unable to download new version ${t.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!m&&!t.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(m||t.disableDifferentialDownload||await this.differentialDownloadInstaller(r,t,i,n,wr.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(r.url,i,o);const c=await this.verifySignature(i);if(c!=null)throw await s(),(0,wr.newError)(`New version ${t.updateInfoAndProvider.info.version} is not signed by the application owner: ${c}`,"ERR_UPDATER_INVALID_SIGNATURE");if(m&&await this.differentialDownloadWebPackage(t,l,a,n))try{await this.httpExecutor.download(new Zs.URL(l.path),a,{headers:t.requestHeaders,cancellationToken:t.cancellationToken,sha512:l.sha512})}catch(f){try{await(0,Uw.unlink)(a)}catch{}throw f}}})}async verifySignature(t){let n;try{if(n=(await this.configOnDisk.value).publisherName,n==null)return null}catch(r){if(r.code==="ENOENT")return null;throw r}return await this._verifyUpdateCodeSignature(Array.isArray(n)?n:[n],t)}doInstall(t){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const r=["--updated"];t.isSilent&&r.push("/S"),t.isForceRunAfter&&r.push("--force-run"),this.installDirectory&&r.push(`/D=${this.installDirectory}`);const i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&r.push(`--package-file=${i}`);const o=()=>{this.spawnLog(Js.join(process.resourcesPath,"elevate.exe"),[n].concat(r)).catch(a=>this.dispatchError(a))};return t.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),o(),!0):(this.spawnLog(n,r).catch(a=>{const s=a.code;this._logger.info(`Cannot run installer: error code: ${s}, error message: "${a.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),s==="UNKNOWN"||s==="EACCES"?o():s==="ENOENT"?ae.shell.openPath(n).catch(l=>this.dispatchError(l)):this.dispatchError(a)}),!0)}async differentialDownloadWebPackage(t,n,r,i){if(n.blockMapSize==null)return!0;try{const o={newUrl:new Zs.URL(n.path),oldFile:Js.join(this.downloadedUpdateHelper.cacheDir,wr.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:r,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,cancellationToken:t.cancellationToken};this.listenerCount(Qs.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(Qs.DOWNLOAD_PROGRESS,a)),await new xw.FileWithEmbeddedBlockMapDifferentialDownloader(n,this.httpExecutor,o).download()}catch(o){return this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),process.platform==="win32"}return!1}}Ln.NsisUpdater=Mw;(function(e){var t=Se&&Se.__createBinding||(Object.create?function(A,T,S,D){D===void 0&&(D=S);var x=Object.getOwnPropertyDescriptor(T,S);(!x||("get"in x?!T.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(A,D,x)}:function(A,T,S,D){D===void 0&&(D=S),A[D]=T[S]}),n=Se&&Se.__exportStar||function(A,T){for(var S in A)S!=="default"&&!Object.prototype.hasOwnProperty.call(T,S)&&t(T,A,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const r=gt,i=Q;var o=Ze;Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return o.BaseUpdater}});var a=ut;Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return a.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return a.NoOpLogger}});var s=ce;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return s.Provider}});var l=Pn;Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return l.AppImageUpdater}});var m=Nn;Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return m.DebUpdater}});var c=Dn;Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return c.PacmanUpdater}});var f=Fn;Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return f.RpmUpdater}});var h=xn;Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return h.MacUpdater}});var g=Ln;Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return g.NsisUpdater}}),n(Et,e);let _;function y(){if(process.platform==="win32")_=new Ln.NsisUpdater;else if(process.platform==="darwin")_=new xn.MacUpdater;else{_=new Pn.AppImageUpdater;try{const A=i.join(process.resourcesPath,"package-type");if(!(0,r.existsSync)(A))return _;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const T=(0,r.readFileSync)(A).toString().trim();switch(console.info("Found package-type:",T),T){case"deb":_=new Nn.DebUpdater;break;case"rpm":_=new Fn.RpmUpdater;break;case"pacman":_=new Dn.PacmanUpdater;break;default:break}}catch(A){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",A.message)}}return _}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>_||y()})})(ol);process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";let Ve=null;function el(){Ve=new ae.BrowserWindow({width:1200,height:800,minWidth:800,minHeight:600,show:!1,autoHideMenuBar:!0,titleBarStyle:"default",webPreferences:{preload:Q.join(__dirname,"../preload/preload.js"),sandbox:!1,contextIsolation:!0,enableRemoteModule:!1,nodeIntegration:!1}}),Ve.on("ready-to-show",()=>{Ve==null||Ve.show()}),Ve.webContents.setWindowOpenHandler(e=>(ae.shell.openExternal(e.url),{action:"deny"})),process.env.NODE_ENV==="development"&&process.env.ELECTRON_RENDERER_URL?Ve.loadURL(process.env.ELECTRON_RENDERER_URL):Ve.loadFile(Q.join(__dirname,"../renderer/index.html"))}ae.app.whenReady().then(()=>{ae.app.setAppUserModelId("com.pdftoolkit.pro"),el(),ae.app.on("activate",function(){ae.BrowserWindow.getAllWindows().length===0&&el()})});ae.app.on("window-all-closed",()=>{process.platform!=="darwin"&&ae.app.quit()});ae.ipcMain.handle("app:getVersion",()=>ae.app.getVersion());ae.ipcMain.handle("dialog:openFile",async()=>await ae.dialog.showOpenDialog(Ve,{properties:["openFile","multiSelections"],filters:[{name:"PDF Files",extensions:["pdf"]},{name:"All Files",extensions:["*"]}]}));ae.ipcMain.handle("dialog:saveFile",async(e,t)=>await ae.dialog.showSaveDialog(Ve,{defaultPath:t,filters:[{name:"PDF Files",extensions:["pdf"]},{name:"All Files",extensions:["*"]}]}));process.env.NODE_ENV==="production"&&ol.autoUpdater.checkForUpdatesAndNotify();
